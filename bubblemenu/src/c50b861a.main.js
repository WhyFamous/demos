/**
 * @license almond 0.2.9 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 *
 * Owner: mark@famo.us
 * @license MPL 2.0
 * @copyright Famous Industries, Inc. 2014
 */

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 *
 * Owner: david@famo.us
 * @license MPL 2.0
 * @copyright Famous Industries, Inc. 2014
 */

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 *
 * Owner: tony@adartainc.com
 * @license MPL 2.0
 * @copyright ADARTA Inc. 2014
 */

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 *
 * Owner: felix@famo.us
 * @license MPL 2.0
 * @copyright Famous Industries, Inc. 2014
 */

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 *
 * @license MPL 2.0
 * @copyright Famous Industries, Inc. 2014
 */

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 *
 * Owner: tony@adartainc.com
 * Original Author:
 * @license MPL 2.0
 * @copyright ADARTA Inc. 2014
 */

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 *
 * Owner: tony@adartainc.com
 * Original Author: jasonals.com
 * @license MPL 2.0
 * @copyright ADARTA Inc. 2014
 */

!function(){var t,e,i;!function(n){function s(t,e){return b.call(t,e)}function o(t,e){var i,n,s,o,r,a,u,h,c,p,l,f=e&&e.split("/"),d=v.map,m=d&&d["*"]||{};if(t&&"."===t.charAt(0))if(e){for(f=f.slice(0,f.length-1),t=t.split("/"),r=t.length-1,v.nodeIdCompat&&T.test(t[r])&&(t[r]=t[r].replace(T,"")),t=f.concat(t),c=0;c<t.length;c+=1)if(l=t[c],"."===l)t.splice(c,1),c-=1;else if(".."===l){if(1===c&&(".."===t[2]||".."===t[0]))break;c>0&&(t.splice(c-1,2),c-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((f||m)&&d){for(i=t.split("/"),c=i.length;c>0;c-=1){if(n=i.slice(0,c).join("/"),f)for(p=f.length;p>0;p-=1)if(s=d[f.slice(0,p).join("/")],s&&(s=s[n])){o=s,a=c;break}if(o)break;!u&&m&&m[n]&&(u=m[n],h=c)}!o&&u&&(o=u,a=h),o&&(i.splice(0,a,o),t=i.join("/"))}return t}function r(t,e){return function(){return f.apply(n,O.call(arguments,0).concat([t,e]))}}function a(t){return function(e){return o(e,t)}}function u(t){return function(e){g[t]=e}}function h(t){if(s(y,t)){var e=y[t];delete y[t],_[t]=!0,l.apply(n,e)}if(!s(g,t)&&!s(_,t))throw new Error("No "+t);return g[t]}function c(t){var e,i=t?t.indexOf("!"):-1;return i>-1&&(e=t.substring(0,i),t=t.substring(i+1,t.length)),[e,t]}function p(t){return function(){return v&&v.config&&v.config[t]||{}}}var l,f,d,m,g={},y={},v={},_={},b=Object.prototype.hasOwnProperty,O=[].slice,T=/\.js$/;d=function(t,e){var i,n=c(t),s=n[0];return t=n[1],s&&(s=o(s,e),i=h(s)),s?t=i&&i.normalize?i.normalize(t,a(e)):o(t,e):(t=o(t,e),n=c(t),s=n[0],t=n[1],s&&(i=h(s))),{f:s?s+"!"+t:t,n:t,pr:s,p:i}},m={require:function(t){return r(t)},exports:function(t){var e=g[t];return"undefined"!=typeof e?e:g[t]={}},module:function(t){return{id:t,uri:"",exports:g[t],config:p(t)}}},l=function(t,e,i,o){var a,c,p,l,f,v,b=[],O=typeof i;if(o=o||t,"undefined"===O||"function"===O){for(e=!e.length&&i.length?["require","exports","module"]:e,f=0;f<e.length;f+=1)if(l=d(e[f],o),c=l.f,"require"===c)b[f]=m.require(t);else if("exports"===c)b[f]=m.exports(t),v=!0;else if("module"===c)a=b[f]=m.module(t);else if(s(g,c)||s(y,c)||s(_,c))b[f]=h(c);else{if(!l.p)throw new Error(t+" missing "+c);l.p.load(l.n,r(o,!0),u(c),{}),b[f]=g[c]}p=i?i.apply(g[t],b):void 0,t&&(a&&a.exports!==n&&a.exports!==g[t]?g[t]=a.exports:p===n&&v||(g[t]=p))}else t&&(g[t]=i)},t=e=f=function(t,e,i,s,o){if("string"==typeof t)return m[t]?m[t](e):h(d(t,e).f);if(!t.splice){if(v=t,v.deps&&f(v.deps,v.callback),!e)return;e.splice?(t=e,e=i,i=null):t=n}return e=e||function(){},"function"==typeof i&&(i=s,s=o),s?l(n,t,e,i):setTimeout(function(){l(n,t,e,i)},4),f},f.config=function(t){return f(t)},t._defined=g,i=function(t,e,i){e.splice||(i=e,e=[]),s(g,t)||s(y,t)||(y[t]=[t,e,i])},i.amd={jQuery:!0}}(),i("almond",function(){}),i("famous/core/Entity",["require","exports","module"],function(t,e,i){function n(t){return a[t]}function s(t,e){a[t]=e}function o(t){var e=a.length;return s(e,t),e}function r(t){s(t,null)}var a=[];i.exports={register:o,unregister:r,get:n,set:s}}),i("famous/core/Transform",["require","exports","module"],function(t,e,i){function n(t){return 2===t.length?t[0]*t[0]+t[1]*t[1]:t[0]*t[0]+t[1]*t[1]+t[2]*t[2]}function s(t){return Math.sqrt(n(t))}function o(t){return 0>t?-1:1}var r={};r.precision=1e-6,r.identity=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],r.multiply4x4=function(t,e){return[t[0]*e[0]+t[4]*e[1]+t[8]*e[2]+t[12]*e[3],t[1]*e[0]+t[5]*e[1]+t[9]*e[2]+t[13]*e[3],t[2]*e[0]+t[6]*e[1]+t[10]*e[2]+t[14]*e[3],t[3]*e[0]+t[7]*e[1]+t[11]*e[2]+t[15]*e[3],t[0]*e[4]+t[4]*e[5]+t[8]*e[6]+t[12]*e[7],t[1]*e[4]+t[5]*e[5]+t[9]*e[6]+t[13]*e[7],t[2]*e[4]+t[6]*e[5]+t[10]*e[6]+t[14]*e[7],t[3]*e[4]+t[7]*e[5]+t[11]*e[6]+t[15]*e[7],t[0]*e[8]+t[4]*e[9]+t[8]*e[10]+t[12]*e[11],t[1]*e[8]+t[5]*e[9]+t[9]*e[10]+t[13]*e[11],t[2]*e[8]+t[6]*e[9]+t[10]*e[10]+t[14]*e[11],t[3]*e[8]+t[7]*e[9]+t[11]*e[10]+t[15]*e[11],t[0]*e[12]+t[4]*e[13]+t[8]*e[14]+t[12]*e[15],t[1]*e[12]+t[5]*e[13]+t[9]*e[14]+t[13]*e[15],t[2]*e[12]+t[6]*e[13]+t[10]*e[14]+t[14]*e[15],t[3]*e[12]+t[7]*e[13]+t[11]*e[14]+t[15]*e[15]]},r.multiply=function(t,e){return[t[0]*e[0]+t[4]*e[1]+t[8]*e[2],t[1]*e[0]+t[5]*e[1]+t[9]*e[2],t[2]*e[0]+t[6]*e[1]+t[10]*e[2],0,t[0]*e[4]+t[4]*e[5]+t[8]*e[6],t[1]*e[4]+t[5]*e[5]+t[9]*e[6],t[2]*e[4]+t[6]*e[5]+t[10]*e[6],0,t[0]*e[8]+t[4]*e[9]+t[8]*e[10],t[1]*e[8]+t[5]*e[9]+t[9]*e[10],t[2]*e[8]+t[6]*e[9]+t[10]*e[10],0,t[0]*e[12]+t[4]*e[13]+t[8]*e[14]+t[12],t[1]*e[12]+t[5]*e[13]+t[9]*e[14]+t[13],t[2]*e[12]+t[6]*e[13]+t[10]*e[14]+t[14],1]},r.thenMove=function(t,e){return e[2]||(e[2]=0),[t[0],t[1],t[2],0,t[4],t[5],t[6],0,t[8],t[9],t[10],0,t[12]+e[0],t[13]+e[1],t[14]+e[2],1]},r.moveThen=function(t,e){t[2]||(t[2]=0);var i=t[0]*e[0]+t[1]*e[4]+t[2]*e[8],n=t[0]*e[1]+t[1]*e[5]+t[2]*e[9],s=t[0]*e[2]+t[1]*e[6]+t[2]*e[10];return r.thenMove(e,[i,n,s])},r.translate=function(t,e,i){return void 0===i&&(i=0),[1,0,0,0,0,1,0,0,0,0,1,0,t,e,i,1]},r.thenScale=function(t,e){return[e[0]*t[0],e[1]*t[1],e[2]*t[2],0,e[0]*t[4],e[1]*t[5],e[2]*t[6],0,e[0]*t[8],e[1]*t[9],e[2]*t[10],0,e[0]*t[12],e[1]*t[13],e[2]*t[14],1]},r.scale=function(t,e,i){return void 0===i&&(i=1),[t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1]},r.rotateX=function(t){var e=Math.cos(t),i=Math.sin(t);return[1,0,0,0,0,e,i,0,0,-i,e,0,0,0,0,1]},r.rotateY=function(t){var e=Math.cos(t),i=Math.sin(t);return[e,0,-i,0,0,1,0,0,i,0,e,0,0,0,0,1]},r.rotateZ=function(t){var e=Math.cos(t),i=Math.sin(t);return[e,i,0,0,-i,e,0,0,0,0,1,0,0,0,0,1]},r.rotate=function(t,e,i){var n=Math.cos(t),s=Math.sin(t),o=Math.cos(e),r=Math.sin(e),a=Math.cos(i),u=Math.sin(i),h=[o*a,n*u+s*r*a,s*u-n*r*a,0,-o*u,n*a-s*r*u,s*a+n*r*u,0,r,-s*o,n*o,0,0,0,0,1];return h},r.rotateAxis=function(t,e){var i=Math.sin(e),n=Math.cos(e),s=1-n,o=t[0]*t[0]*s,r=t[0]*t[1]*s,a=t[0]*t[2]*s,u=t[1]*t[1]*s,h=t[1]*t[2]*s,c=t[2]*t[2]*s,p=t[0]*i,l=t[1]*i,f=t[2]*i,d=[o+n,r+f,a-l,0,r-f,u+n,h+p,0,a+l,h-p,c+n,0,0,0,0,1];return d},r.aboutOrigin=function(t,e){var i=t[0]-(t[0]*e[0]+t[1]*e[4]+t[2]*e[8]),n=t[1]-(t[0]*e[1]+t[1]*e[5]+t[2]*e[9]),s=t[2]-(t[0]*e[2]+t[1]*e[6]+t[2]*e[10]);return r.thenMove(e,[i,n,s])},r.skew=function(t,e,i){return[1,0,0,0,Math.tan(i),1,0,0,Math.tan(e),Math.tan(t),1,0,0,0,0,1]},r.skewX=function(t){return[1,0,0,0,Math.tan(t),1,0,0,0,0,1,0,0,0,0,1]},r.skewY=function(t){return[1,Math.tan(t),0,0,0,1,0,0,0,0,1,0,0,0,0,1]},r.perspective=function(t){return[1,0,0,0,0,1,0,0,0,0,1,-1/t,0,0,0,1]},r.getTranslate=function(t){return[t[12],t[13],t[14]]},r.inverse=function(t){var e=t[5]*t[10]-t[6]*t[9],i=t[4]*t[10]-t[6]*t[8],n=t[4]*t[9]-t[5]*t[8],s=t[1]*t[10]-t[2]*t[9],o=t[0]*t[10]-t[2]*t[8],r=t[0]*t[9]-t[1]*t[8],a=t[1]*t[6]-t[2]*t[5],u=t[0]*t[6]-t[2]*t[4],h=t[0]*t[5]-t[1]*t[4],c=t[0]*e-t[1]*i+t[2]*n,p=1/c,l=[p*e,-p*s,p*a,0,-p*i,p*o,-p*u,0,p*n,-p*r,p*h,0,0,0,0,1];return l[12]=-t[12]*l[0]-t[13]*l[4]-t[14]*l[8],l[13]=-t[12]*l[1]-t[13]*l[5]-t[14]*l[9],l[14]=-t[12]*l[2]-t[13]*l[6]-t[14]*l[10],l},r.transpose=function(t){return[t[0],t[4],t[8],t[12],t[1],t[5],t[9],t[13],t[2],t[6],t[10],t[14],t[3],t[7],t[11],t[15]]},r.interpret=function(t){var e=[t[0],t[1],t[2]],i=o(e[0]),a=s(e),u=[e[0]+i*a,e[1],e[2]],h=2/n(u);if(h>=1/0)return{translate:r.getTranslate(t),rotate:[0,0,0],scale:[0,0,0],skew:[0,0,0]};var c=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1];c[0]=1-h*u[0]*u[0],c[5]=1-h*u[1]*u[1],c[10]=1-h*u[2]*u[2],c[1]=-h*u[0]*u[1],c[2]=-h*u[0]*u[2],c[6]=-h*u[1]*u[2],c[4]=c[1],c[8]=c[2],c[9]=c[6];var p=r.multiply(c,t),l=[p[5],p[6]],f=o(l[0]),d=s(l),m=[l[0]+f*d,l[1]],g=2/n(m),y=[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1];y[5]=1-g*m[0]*m[0],y[10]=1-g*m[1]*m[1],y[6]=-g*m[0]*m[1],y[9]=y[6];var v=r.multiply(y,c),_=r.multiply(v,t),b=r.scale(_[0]<0?-1:1,_[5]<0?-1:1,_[10]<0?-1:1);_=r.multiply(_,b),v=r.multiply(b,v);var O={};return O.translate=r.getTranslate(t),O.rotate=[Math.atan2(-v[6],v[10]),Math.asin(v[2]),Math.atan2(-v[1],v[0])],O.rotate[0]||(O.rotate[0]=0,O.rotate[2]=Math.atan2(v[4],v[5])),O.scale=[_[0],_[5],_[10]],O.skew=[Math.atan2(_[9],O.scale[2]),Math.atan2(_[8],O.scale[2]),Math.atan2(_[4],O.scale[0])],Math.abs(O.rotate[0])+Math.abs(O.rotate[2])>1.5*Math.PI&&(O.rotate[1]=Math.PI-O.rotate[1],O.rotate[1]>Math.PI&&(O.rotate[1]-=2*Math.PI),O.rotate[1]<-Math.PI&&(O.rotate[1]+=2*Math.PI),O.rotate[0]<0?O.rotate[0]+=Math.PI:O.rotate[0]-=Math.PI,O.rotate[2]<0?O.rotate[2]+=Math.PI:O.rotate[2]-=Math.PI),O},r.average=function(t,e,i){i=void 0===i?.5:i;for(var n=r.interpret(t),s=r.interpret(e),o={translate:[0,0,0],rotate:[0,0,0],scale:[0,0,0],skew:[0,0,0]},a=0;3>a;a++)o.translate[a]=(1-i)*n.translate[a]+i*s.translate[a],o.rotate[a]=(1-i)*n.rotate[a]+i*s.rotate[a],o.scale[a]=(1-i)*n.scale[a]+i*s.scale[a],o.skew[a]=(1-i)*n.skew[a]+i*s.skew[a];return r.build(o)},r.build=function(t){var e=r.scale(t.scale[0],t.scale[1],t.scale[2]),i=r.skew(t.skew[0],t.skew[1],t.skew[2]),n=r.rotate(t.rotate[0],t.rotate[1],t.rotate[2]);return r.thenMove(r.multiply(r.multiply(n,i),e),t.translate)},r.equals=function(t,e){return!r.notEquals(t,e)},r.notEquals=function(t,e){return t===e?!1:!(t&&e)||t[12]!==e[12]||t[13]!==e[13]||t[14]!==e[14]||t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[4]!==e[4]||t[5]!==e[5]||t[6]!==e[6]||t[8]!==e[8]||t[9]!==e[9]||t[10]!==e[10]},r.normalizeRotation=function(t){var e=t.slice(0);for((e[0]===.5*Math.PI||e[0]===.5*-Math.PI)&&(e[0]=-e[0],e[1]=Math.PI-e[1],e[2]-=Math.PI),e[0]>.5*Math.PI&&(e[0]=e[0]-Math.PI,e[1]=Math.PI-e[1],e[2]-=Math.PI),e[0]<.5*-Math.PI&&(e[0]=e[0]+Math.PI,e[1]=-Math.PI-e[1],e[2]-=Math.PI);e[1]<-Math.PI;)e[1]+=2*Math.PI;for(;e[1]>=Math.PI;)e[1]-=2*Math.PI;for(;e[2]<-Math.PI;)e[2]+=2*Math.PI;for(;e[2]>=Math.PI;)e[2]-=2*Math.PI;return e},r.inFront=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,.001,1],r.behind=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,-.001,1],i.exports=r}),i("famous/core/SpecParser",["require","exports","module","./Transform"],function(t,e,i){function n(){this.result={}}function s(t,e){return[t[0]*e[0]+t[1]*e[4]+t[2]*e[8],t[0]*e[1]+t[1]*e[5]+t[2]*e[9],t[0]*e[2]+t[1]*e[6]+t[2]*e[10]]}var o=t("./Transform");n._instance=new n,n.parse=function(t,e){return n._instance.parse(t,e)},n.prototype.parse=function(t,e){return this.reset(),this._parseSpec(t,e,o.identity),this.result},n.prototype.reset=function(){this.result={}};var r=[0,0];n.prototype._parseSpec=function(t,e,i){var n,a,u,h,c,p,l;if("number"==typeof t){if(n=t,u=e.transform,p=e.align||e.origin,e.size&&p&&(p[0]||p[1])){var f=[p[0]*e.size[0],p[1]*e.size[1],0];u=o.thenMove(u,s(f,i))}this.result[n]={transform:u,opacity:e.opacity,origin:e.origin||r,align:e.align||e.origin||r,size:e.size}}else{if(!t)return;if(t instanceof Array)for(var d=0;d<t.length;d++)this._parseSpec(t[d],e,i);else{a=t.target,u=e.transform,h=e.opacity,c=e.origin,p=e.align,l=e.size;var m=i;if(void 0!==t.opacity&&(h=e.opacity*t.opacity),t.transform&&(u=o.multiply(e.transform,t.transform)),t.origin&&(c=t.origin,m=e.transform),t.align&&(p=t.align),t.size){var g=e.size;l=[void 0!==t.size[0]?t.size[0]:g[0],void 0!==t.size[1]?t.size[1]:g[1]],g&&(p||(p=c),p&&(p[0]||p[1])&&(u=o.thenMove(u,s([p[0]*g[0],p[1]*g[1],0],i))),c&&(c[0]||c[1])&&(u=o.moveThen([-c[0]*l[0],-c[1]*l[1],0],u))),m=e.transform,c=null,p=null}this._parseSpec(a,{transform:u,opacity:h,origin:c,align:p,size:l},m)}}},i.exports=n}),i("famous/core/RenderNode",["require","exports","module","./Entity","./SpecParser"],function(t,e,i){function n(t){this._object=null,this._child=null,this._hasMultipleChildren=!1,this._isRenderable=!1,this._isModifier=!1,this._resultCache={},this._prevResults={},this._childResult=null,t&&this.set(t)}function s(t,e,i){for(var n=r.parse(t,e),a=Object.keys(n),u=0;u<a.length;u++){var h=a[u],c=o.get(h),p=n[h];p.allocator=e.allocator;var l=c.commit(p);l?s(l,e,i):i[h]=p}}var o=t("./Entity"),r=t("./SpecParser");n.prototype.add=function(t){var e=t instanceof n?t:new n(t);return this._child instanceof Array?this._child.push(e):this._child?(this._child=[this._child,e],this._hasMultipleChildren=!0,this._childResult=[]):this._child=e,e},n.prototype.get=function(){return this._object||(this._hasMultipleChildren?null:this._child?this._child.get():null)},n.prototype.set=function(t){return this._childResult=null,this._hasMultipleChildren=!1,this._isRenderable=t.render?!0:!1,this._isModifier=t.modify?!0:!1,this._object=t,this._child=null,t instanceof n?t:this},n.prototype.getSize=function(){var t=null,e=this.get();return e&&e.getSize&&(t=e.getSize()),!t&&this._child&&this._child.getSize&&(t=this._child.getSize()),t},n.prototype.commit=function(t){for(var e=Object.keys(this._prevResults),i=0;i<e.length;i++){var n=e[i];if(void 0===this._resultCache[n]){var r=o.get(n);r.cleanup&&r.cleanup(t.allocator)}}this._prevResults=this._resultCache,this._resultCache={},s(this.render(),t,this._resultCache)},n.prototype.render=function(){if(this._isRenderable)return this._object.render();var t=null;if(this._hasMultipleChildren){t=this._childResult;for(var e=this._child,i=0;i<e.length;i++)t[i]=e[i].render()}else this._child&&(t=this._child.render());return this._isModifier?this._object.modify(t):t},i.exports=n}),i("famous/core/EventEmitter",["require","exports","module"],function(t,e,i){function n(){this.listeners={},this._owner=this}n.prototype.emit=function(t,e){var i=this.listeners[t];if(i)for(var n=0;n<i.length;n++)i[n].call(this._owner,e);return this},n.prototype.on=function(t,e){t in this.listeners||(this.listeners[t]=[]);var i=this.listeners[t].indexOf(e);return 0>i&&this.listeners[t].push(e),this},n.prototype.addListener=n.prototype.on,n.prototype.removeListener=function(t,e){var i=this.listeners[t].indexOf(e);return i>=0&&this.listeners[t].splice(i,1),this},n.prototype.bindThis=function(t){this._owner=t},i.exports=n}),i("famous/core/EventHandler",["require","exports","module","./EventEmitter"],function(t,e,i){function n(){s.apply(this,arguments),this.downstream=[],this.downstreamFn=[],this.upstream=[],this.upstreamListeners={}}var s=t("./EventEmitter");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.setInputHandler=function(t,e){t.trigger=e.trigger.bind(e),e.subscribe&&e.unsubscribe&&(t.subscribe=e.subscribe.bind(e),t.unsubscribe=e.unsubscribe.bind(e))},n.setOutputHandler=function(t,e){e instanceof n&&e.bindThis(t),t.pipe=e.pipe.bind(e),t.unpipe=e.unpipe.bind(e),t.on=e.on.bind(e),t.addListener=t.on,t.removeListener=e.removeListener.bind(e)},n.prototype.emit=function(t,e){s.prototype.emit.apply(this,arguments);var i=0;for(i=0;i<this.downstream.length;i++)this.downstream[i].trigger&&this.downstream[i].trigger(t,e);for(i=0;i<this.downstreamFn.length;i++)this.downstreamFn[i](t,e);return this},n.prototype.trigger=n.prototype.emit,n.prototype.pipe=function(t){if(t.subscribe instanceof Function)return t.subscribe(this);var e=t instanceof Function?this.downstreamFn:this.downstream,i=e.indexOf(t);return 0>i&&e.push(t),t instanceof Function?t("pipe",null):t.trigger&&t.trigger("pipe",null),t},n.prototype.unpipe=function(t){if(t.unsubscribe instanceof Function)return t.unsubscribe(this);var e=t instanceof Function?this.downstreamFn:this.downstream,i=e.indexOf(t);return i>=0?(e.splice(i,1),t instanceof Function?t("unpipe",null):t.trigger&&t.trigger("unpipe",null),t):!1},n.prototype.on=function(t){if(s.prototype.on.apply(this,arguments),!(t in this.upstreamListeners)){var e=this.trigger.bind(this,t);this.upstreamListeners[t]=e;for(var i=0;i<this.upstream.length;i++)this.upstream[i].on(t,e)}return this},n.prototype.addListener=n.prototype.on,n.prototype.subscribe=function(t){var e=this.upstream.indexOf(t);if(0>e){this.upstream.push(t);for(var i in this.upstreamListeners)t.on(i,this.upstreamListeners[i])}return this},n.prototype.unsubscribe=function(t){var e=this.upstream.indexOf(t);if(e>=0){this.upstream.splice(e,1);for(var i in this.upstreamListeners)t.removeListener(i,this.upstreamListeners[i])}return this},i.exports=n}),i("famous/core/ElementAllocator",["require","exports","module"],function(t,e,i){function n(t){t||(t=document.createDocumentFragment()),this.container=t,this.detachedNodes={},this.nodeCount=0}n.prototype.migrate=function(t){var e=this.container;if(t!==e){if(e instanceof DocumentFragment)t.appendChild(e);else for(;e.hasChildNodes();)t.appendChild(e.removeChild(e.firstChild));this.container=t}},n.prototype.allocate=function(t){t=t.toLowerCase(),t in this.detachedNodes||(this.detachedNodes[t]=[]);var e,i=this.detachedNodes[t];return i.length>0?e=i.pop():(e=document.createElement(t),this.container.appendChild(e)),this.nodeCount++,e},n.prototype.deallocate=function(t){var e=t.nodeName.toLowerCase(),i=this.detachedNodes[e];i.push(t),this.nodeCount--},n.prototype.getNodeCount=function(){return this.nodeCount},i.exports=n}),i("famous/utilities/Utility",["require","exports","module"],function(t,e,i){var n={};n.Direction={X:0,Y:1,Z:2},n.after=function(t,e){var i=t;return function(){i--,0===i&&e.apply(this,arguments)}},n.loadURL=function(t,e){var i=new XMLHttpRequest;i.onreadystatechange=function(){4===this.readyState&&e&&e(this.responseText)},i.open("GET",t),i.send()},n.createDocumentFragmentFromHTML=function(t){var e=document.createElement("div");e.innerHTML=t;for(var i=document.createDocumentFragment();e.hasChildNodes();)i.appendChild(e.firstChild);return i},i.exports=n}),i("famous/transitions/MultipleTransition",["require","exports","module","famous/utilities/Utility"],function(t,e,i){function n(t){this.method=t,this._instances=[],this.state=[]}var s=t("famous/utilities/Utility");n.SUPPORTS_MULTIPLE=!0,n.prototype.get=function(){for(var t=0;t<this._instances.length;t++)this.state[t]=this._instances[t].get();return this.state},n.prototype.set=function(t,e,i){for(var n=s.after(t.length,i),o=0;o<t.length;o++)this._instances[o]||(this._instances[o]=new this.method),this._instances[o].set(t[o],e,n)},n.prototype.reset=function(t){for(var e=0;e<t.length;e++)this._instances[e]||(this._instances[e]=new this.method),this._instances[e].reset(t[e])},i.exports=n}),i("famous/transitions/TweenTransition",["require","exports","module"],function(t,e,i){function n(t){this.options=Object.create(n.DEFAULT_OPTIONS),t&&this.setOptions(t),this._startTime=0,this._startValue=0,this._updateTime=0,this._endValue=0,this._curve=void 0,this._duration=0,this._active=!1,this._callback=void 0,this.state=0,this.velocity=void 0}function s(t,e,i){return(1-i)*t+i*e}function o(t){return t instanceof Object?t instanceof Array?t.slice(0):Object.create(t):t}function r(t,e){var i={curve:e.curve};return e.duration&&(i.duration=e.duration),e.speed&&(i.speed=e.speed),t instanceof Object&&(void 0!==t.duration&&(i.duration=t.duration),t.curve&&(i.curve=t.curve),t.speed&&(i.speed=t.speed)),"string"==typeof i.curve&&(i.curve=n.getCurve(i.curve)),i}function a(t,e,i,n,s){var o,r=1e-7,a=(i(s)-i(s-r))/r;if(t instanceof Array){o=[];for(var u=0;u<t.length;u++)o[u]="number"==typeof t[u]?a*(t[u]-e[u])/n:0}else o=a*(t-e)/n;return o}function u(t,e,i){var n;if(t instanceof Array){n=[];for(var o=0;o<t.length;o++)n[o]="number"==typeof t[o]?s(t[o],e[o],i):t[o]}else n=s(t,e,i);return n}n.Curves={linear:function(t){return t},easeIn:function(t){return t*t},easeOut:function(t){return t*(2-t)},easeInOut:function(t){return.5>=t?2*t*t:-2*t*t+4*t-1},easeOutBounce:function(t){return t*(3-2*t)},spring:function(t){return(1-t)*Math.sin(6*Math.PI*t)+t}},n.SUPPORTS_MULTIPLE=!0,n.DEFAULT_OPTIONS={curve:n.Curves.linear,duration:500,speed:0};var h={};n.registerCurve=function(t,e){return h[t]?!1:(h[t]=e,!0)},n.unregisterCurve=function(t){return h[t]?(delete h[t],!0):!1},n.getCurve=function(t){var e=h[t];if(void 0!==e)return e;throw new Error("curve not registered")},n.getCurves=function(){return h},n.prototype.setOptions=function(t){void 0!==t.curve&&(this.options.curve=t.curve),void 0!==t.duration&&(this.options.duration=t.duration),void 0!==t.speed&&(this.options.speed=t.speed)},n.prototype.set=function(t,e,i){if(!e)return this.reset(t),void(i&&i());if(this._startValue=o(this.get()),e=r(e,this.options),e.speed){var n=this._startValue;if(n instanceof Object){var s=0;for(var a in n)s+=(t[a]-n[a])*(t[a]-n[a]);e.duration=Math.sqrt(s)/e.speed}else e.duration=Math.abs(t-n)/e.speed}this._startTime=Date.now(),this._endValue=o(t),this._startVelocity=o(e.velocity),this._duration=e.duration,this._curve=e.curve,this._active=!0,this._callback=i},n.prototype.reset=function(t,e){if(this._callback){var i=this._callback;this._callback=void 0,i()}this.state=o(t),this.velocity=o(e),this._startTime=0,this._duration=0,this._updateTime=0,this._startValue=this.state,this._startVelocity=this.velocity,this._endValue=this.state,this._active=!1},n.prototype.getVelocity=function(){return this.velocity},n.prototype.get=function(t){return this.update(t),this.state},n.prototype.update=function(t){if(this._active){if(t||(t=Date.now()),!(this._updateTime>=t)){this._updateTime=t;var e=t-this._startTime;if(e>=this._duration)this.state=this._endValue,this.velocity=a(this.state,this._startValue,this._curve,this._duration,1),this._active=!1;else if(0>e)this.state=this._startValue,this.velocity=this._startVelocity;else{var i=e/this._duration;this.state=u(this._startValue,this._endValue,this._curve(i)),this.velocity=a(this.state,this._startValue,this._curve,this._duration,i)}}}else if(this._callback){var n=this._callback;this._callback=void 0,n()}},n.prototype.isActive=function(){return this._active},n.prototype.halt=function(){this.reset(this.get())},n.registerCurve("linear",n.Curves.linear),n.registerCurve("easeIn",n.Curves.easeIn),n.registerCurve("easeOut",n.Curves.easeOut),n.registerCurve("easeInOut",n.Curves.easeInOut),n.registerCurve("easeOutBounce",n.Curves.easeOutBounce),n.registerCurve("spring",n.Curves.spring),n.customCurve=function(t,e){return t=t||0,e=e||0,function(i){return t*i+(-2*t-e+3)*i*i+(t+e-2)*i*i*i}},i.exports=n}),i("famous/transitions/Transitionable",["require","exports","module","./MultipleTransition","./TweenTransition"],function(t,e,i){function n(t){this.currentAction=null,this.actionQueue=[],this.callbackQueue=[],this.state=0,this.velocity=void 0,this._callback=void 0,this._engineInstance=null,this._currentMethod=null,this.set(t)}function s(){if(this._callback){var t=this._callback;this._callback=void 0,t()}if(this.actionQueue.length<=0)return void this.set(this.get());this.currentAction=this.actionQueue.shift(),this._callback=this.callbackQueue.shift();var e=null,i=this.currentAction[0],n=this.currentAction[1];n instanceof Object&&n.method?(e=n.method,"string"==typeof e&&(e=a[e])):e=r,this._currentMethod!==e&&(this._engineInstance=!(i instanceof Object)||e.SUPPORTS_MULTIPLE===!0||i.length<=e.SUPPORTS_MULTIPLE?new e:new o(e),this._currentMethod=e),this._engineInstance.reset(this.state,this.velocity),void 0!==this.velocity&&(n.velocity=this.velocity),this._engineInstance.set(i,n,s.bind(this))}var o=t("./MultipleTransition"),r=t("./TweenTransition"),a={};n.registerMethod=function(t,e){return t in a?!1:(a[t]=e,!0)},n.unregisterMethod=function(t){return t in a?(delete a[t],!0):!1},n.prototype.set=function(t,e,i){if(!e)return this.reset(t),i&&i(),this;var n=[t,e];return this.actionQueue.push(n),this.callbackQueue.push(i),this.currentAction||s.call(this),this},n.prototype.reset=function(t,e){this._currentMethod=null,this._engineInstance=null,this._callback=void 0,this.state=t,this.velocity=e,this.currentAction=null,this.actionQueue=[],this.callbackQueue=[]},n.prototype.delay=function(t,e){this.set(this.get(),{duration:t,curve:function(){return 0}},e)},n.prototype.get=function(t){return this._engineInstance&&(this._engineInstance.getVelocity&&(this.velocity=this._engineInstance.getVelocity()),this.state=this._engineInstance.get(t)),this.state},n.prototype.isActive=function(){return!!this.currentAction},n.prototype.halt=function(){this.set(this.get())},i.exports=n}),i("famous/core/Context",["require","exports","module","./RenderNode","./EventHandler","./ElementAllocator","./Transform","famous/transitions/Transitionable"],function(t,e,i){function n(t){return[t.clientWidth,t.clientHeight]}function s(t){this.container=t,this._allocator=new a(t),this._node=new o,this._eventOutput=new r,this._size=n(this.container),this._perspectiveState=new h(0),this._perspective=void 0,this._nodeContext={allocator:this._allocator,transform:u.identity,opacity:1,origin:c,align:null,size:this._size},this._eventOutput.on("resize",function(){this.setSize(n(this.container))}.bind(this))}var o=t("./RenderNode"),r=t("./EventHandler"),a=t("./ElementAllocator"),u=t("./Transform"),h=t("famous/transitions/Transitionable"),c=[0,0];s.prototype.getAllocator=function(){return this._allocator},s.prototype.add=function(t){return this._node.add(t)},s.prototype.migrate=function(t){t!==this.container&&(this.container=t,this._allocator.migrate(t))},s.prototype.getSize=function(){return this._size},s.prototype.setSize=function(t){t||(t=n(this.container)),this._size[0]=t[0],this._size[1]=t[1]},s.prototype.update=function(t){t&&(t.transform&&(this._nodeContext.transform=t.transform),t.opacity&&(this._nodeContext.opacity=t.opacity),t.origin&&(this._nodeContext.origin=t.origin),t.align&&(this._nodeContext.align=t.align),t.size&&(this._nodeContext.size=t.size));var e=this._perspectiveState.get();e!==this._perspective&&(this.container.style.perspective=e?e.toFixed()+"px":"",this.container.style.webkitPerspective=e?e.toFixed():"",this._perspective=e),this._node.commit(this._nodeContext)},s.prototype.getPerspective=function(){return this._perspectiveState.get()},s.prototype.setPerspective=function(t,e,i){return this._perspectiveState.set(t,e,i)},s.prototype.emit=function(t,e){return this._eventOutput.emit(t,e)},s.prototype.on=function(t,e){return this._eventOutput.on(t,e)},s.prototype.removeListener=function(t,e){return this._eventOutput.removeListener(t,e)},s.prototype.pipe=function(t){return this._eventOutput.pipe(t)},s.prototype.unpipe=function(t){return this._eventOutput.unpipe(t)},i.exports=s}),i("famous/core/OptionsManager",["require","exports","module","./EventHandler"],function(t,e,i){function n(t){this._value=t,this.eventOutput=null}function s(){this.eventOutput=new o,this.eventOutput.bindThis(this),o.setOutputHandler(this,this.eventOutput)}var o=t("./EventHandler");n.patch=function(t){for(var e=new n(t),i=1;i<arguments.length;i++)e.patch(arguments[i]);return t},n.prototype.patch=function(){for(var t=this._value,e=0;e<arguments.length;e++){var i=arguments[e];for(var n in i)n in t&&i[n]&&i[n].constructor===Object&&t[n]&&t[n].constructor===Object?(t.hasOwnProperty(n)||(t[n]=Object.create(t[n])),this.key(n).patch(i[n]),this.eventOutput&&this.eventOutput.emit("change",{id:n,value:this.key(n).value()})):this.set(n,i[n])}return this},n.prototype.setOptions=n.prototype.patch,n.prototype.key=function(t){var e=new n(this._value[t]);return(!(e._value instanceof Object)||e._value instanceof Array)&&(e._value={}),e},n.prototype.get=function(t){return this._value[t]},n.prototype.getOptions=n.prototype.get,n.prototype.set=function(t,e){var i=this.get(t);return this._value[t]=e,this.eventOutput&&e!==i&&this.eventOutput.emit("change",{id:t,value:e}),this},n.prototype.value=function(){return this._value},n.prototype.on=function(){return s.call(this),this.on.apply(this,arguments)},n.prototype.removeListener=function(){return s.call(this),this.removeListener.apply(this,arguments)},n.prototype.pipe=function(){return s.call(this),this.pipe.apply(this,arguments)},n.prototype.unpipe=function(){return s.call(this),this.unpipe.apply(this,arguments)},i.exports=n}),i("famous/core/Engine",["require","exports","module","./Context","./EventHandler","./OptionsManager"],function(t,e,i){function n(){v.runLoop?(c.step(),window.requestAnimationFrame(n)):m=!1}function s(){for(var t=0;t<p.length;t++)p[t].emit("resize");y.emit("resize")}var o,r,a=t("./Context"),u=t("./EventHandler"),h=t("./OptionsManager"),c={},p=[],l=[],f=[],d=Date.now(),m=!0,g={},y=new u,v={containerType:"div",containerClass:"famous-container",fpsCap:void 0,runLoop:!0},_=new h(v),b=10;c.step=function(){var t=Date.now();if(!(r&&r>t-d)){var e=0;for(o=t-d,d=t,y.emit("prerender"),e=0;e<l.length;e++)l[e].call(this);for(l.splice(0);f.length&&Date.now()-t<b;)f.shift().call(this);for(e=0;e<p.length;e++)p[e].update();y.emit("postrender")}},window.requestAnimationFrame(n),window.addEventListener("resize",s,!1),s(),window.addEventListener("touchmove",function(t){t.preventDefault()},!0),c.pipe=function(t){return t.subscribe instanceof Function?t.subscribe(c):y.pipe(t)},c.unpipe=function(t){return t.unsubscribe instanceof Function?t.unsubscribe(c):y.unpipe(t)},c.on=function(t,e){return t in g||(g[t]=y.emit.bind(y,t),document.body?document.body.addEventListener(t,g[t]):c.nextTick(function(t,e){document.body.addEventListener(t,e)}.bind(this,t,g[t]))),y.on(t,e)},c.emit=function(t,e){return y.emit(t,e)},c.removeListener=function(t,e){return y.removeListener(t,e)},c.getFPS=function(){return 1e3/o},c.setFPSCap=function(t){r=Math.floor(1e3/t)},c.getOptions=function(){return _.getOptions.apply(_,arguments)},c.setOptions=function(){return _.setOptions.apply(_,arguments)},c.createContext=function(t){var e=!1;t||(t=document.createElement(v.containerType),t.classList.add(v.containerClass),e=!0);var i=new a(t);return c.registerContext(i),e&&c.nextTick(function(t,e){document.body.appendChild(e),t.emit("resize")}.bind(this,i,t)),i},c.registerContext=function(t){return p.push(t),t},c.nextTick=function(t){l.push(t)},c.defer=function(t){f.push(t)},_.on("change",function(t){"fpsCap"===t.id?c.setFPSCap(t.value):"runLoop"===t.id&&!m&&t.value&&(m=!0,window.requestAnimationFrame(n))}),i.exports=c}),i("famous/core/View",["require","exports","module","./EventHandler","./OptionsManager","./RenderNode"],function(t,e,i){function n(t){this._node=new r,this._eventInput=new s,this._eventOutput=new s,s.setInputHandler(this,this._eventInput),s.setOutputHandler(this,this._eventOutput),this.options=Object.create(this.constructor.DEFAULT_OPTIONS||n.DEFAULT_OPTIONS),this._optionsManager=new o(this.options),t&&this.setOptions(t)}var s=t("./EventHandler"),o=t("./OptionsManager"),r=t("./RenderNode");n.DEFAULT_OPTIONS={},n.prototype.getOptions=function(){return this._optionsManager.value()},n.prototype.setOptions=function(t){this._optionsManager.patch(t)},n.prototype.add=function(){return this._node.add.apply(this._node,arguments)},n.prototype._add=n.prototype.add,n.prototype.render=function(){return this._node.render()},n.prototype.getSize=function(){return this._node&&this._node.getSize?this._node.getSize.apply(this._node,arguments)||this.options.size:this.options.size},i.exports=n}),i("famous/transitions/TransitionableTransform",["require","exports","module","./Transitionable","famous/core/Transform","famous/utilities/Utility"],function(t,e,i){function n(t){this._final=r.identity.slice(),this.translate=new o([0,0,0]),this.rotate=new o([0,0,0]),this.skew=new o([0,0,0]),this.scale=new o([1,1,1]),t&&this.set(t)}function s(){return r.build({translate:this.translate.get(),rotate:this.rotate.get(),skew:this.skew.get(),scale:this.scale.get()})}var o=t("./Transitionable"),r=t("famous/core/Transform"),a=t("famous/utilities/Utility");n.prototype.setTranslate=function(t,e,i){return this.translate.set(t,e,i),this._final=this._final.slice(),this._final[12]=t[0],this._final[13]=t[1],void 0!==t[2]&&(this._final[14]=t[2]),this},n.prototype.setScale=function(t,e,i){return this.scale.set(t,e,i),this._final=this._final.slice(),this._final[0]=t[0],this._final[5]=t[1],void 0!==t[2]&&(this._final[10]=t[2]),this},n.prototype.setRotate=function(t,e,i){return this.rotate.set(t,e,i),this._final=s.call(this),this._final=r.build({translate:this.translate.get(),rotate:t,scale:this.scale.get(),skew:this.skew.get()}),this},n.prototype.setSkew=function(t,e,i){return this.skew.set(t,e,i),this._final=r.build({translate:this.translate.get(),rotate:this.rotate.get(),scale:this.scale.get(),skew:t}),this},n.prototype.set=function(t,e,i){this._final=t;var n=r.interpret(t),s=i?a.after(4,i):null;return this.translate.set(n.translate,e,s),this.rotate.set(n.rotate,e,s),this.skew.set(n.skew,e,s),this.scale.set(n.scale,e,s),this},n.prototype.setDefaultTransition=function(t){this.translate.setDefault(t),this.rotate.setDefault(t),this.skew.setDefault(t),this.scale.setDefault(t)},n.prototype.get=function(){return this.isActive()?s.call(this):this._final
},n.prototype.getFinal=function(){return this._final},n.prototype.isActive=function(){return this.translate.isActive()||this.rotate.isActive()||this.scale.isActive()||this.skew.isActive()},n.prototype.halt=function(){this._final=this.get(),this.translate.halt(),this.rotate.halt(),this.skew.halt(),this.scale.halt()},i.exports=n}),i("famous/core/Modifier",["require","exports","module","./Transform","famous/transitions/Transitionable","famous/transitions/TransitionableTransform"],function(t,e,i){function n(t){this._transformGetter=null,this._opacityGetter=null,this._originGetter=null,this._alignGetter=null,this._sizeGetter=null,this._legacyStates={},this._output={transform:o.identity,opacity:1,origin:null,align:null,size:null,target:null},t&&(t.transform&&this.transformFrom(t.transform),void 0!==t.opacity&&this.opacityFrom(t.opacity),t.origin&&this.originFrom(t.origin),t.align&&this.alignFrom(t.align),t.size&&this.sizeFrom(t.size))}function s(){this._transformGetter&&(this._output.transform=this._transformGetter()),this._opacityGetter&&(this._output.opacity=this._opacityGetter()),this._originGetter&&(this._output.origin=this._originGetter()),this._alignGetter&&(this._output.align=this._alignGetter()),this._sizeGetter&&(this._output.size=this._sizeGetter())}var o=t("./Transform"),r=t("famous/transitions/Transitionable"),a=t("famous/transitions/TransitionableTransform");n.prototype.transformFrom=function(t){return t instanceof Function?this._transformGetter=t:t instanceof Object&&t.get?this._transformGetter=t.get.bind(t):(this._transformGetter=null,this._output.transform=t),this},n.prototype.opacityFrom=function(t){return t instanceof Function?this._opacityGetter=t:t instanceof Object&&t.get?this._opacityGetter=t.get.bind(t):(this._opacityGetter=null,this._output.opacity=t),this},n.prototype.originFrom=function(t){return t instanceof Function?this._originGetter=t:t instanceof Object&&t.get?this._originGetter=t.get.bind(t):(this._originGetter=null,this._output.origin=t),this},n.prototype.alignFrom=function(t){return t instanceof Function?this._alignGetter=t:t instanceof Object&&t.get?this._alignGetter=t.get.bind(t):(this._alignGetter=null,this._output.align=t),this},n.prototype.sizeFrom=function(t){return t instanceof Function?this._sizeGetter=t:t instanceof Object&&t.get?this._sizeGetter=t.get.bind(t):(this._sizeGetter=null,this._output.size=t),this},n.prototype.setTransform=function(t,e,i){return e||this._legacyStates.transform?(this._legacyStates.transform||(this._legacyStates.transform=new a(this._output.transform)),this._transformGetter||this.transformFrom(this._legacyStates.transform),this._legacyStates.transform.set(t,e,i),this):this.transformFrom(t)},n.prototype.setOpacity=function(t,e,i){return e||this._legacyStates.opacity?(this._legacyStates.opacity||(this._legacyStates.opacity=new r(this._output.opacity)),this._opacityGetter||this.opacityFrom(this._legacyStates.opacity),this._legacyStates.opacity.set(t,e,i)):this.opacityFrom(t)},n.prototype.setOrigin=function(t,e,i){return e||this._legacyStates.origin?(this._legacyStates.origin||(this._legacyStates.origin=new r(this._output.origin||[0,0])),this._originGetter||this.originFrom(this._legacyStates.origin),this._legacyStates.origin.set(t,e,i),this):this.originFrom(t)},n.prototype.setAlign=function(t,e,i){return e||this._legacyStates.align?(this._legacyStates.align||(this._legacyStates.align=new r(this._output.align||[0,0])),this._alignGetter||this.alignFrom(this._legacyStates.align),this._legacyStates.align.set(t,e,i),this):this.alignFrom(t)},n.prototype.setSize=function(t,e,i){return t&&(e||this._legacyStates.size)?(this._legacyStates.size||(this._legacyStates.size=new r(this._output.size||[0,0])),this._sizeGetter||this.sizeFrom(this._legacyStates.size),this._legacyStates.size.set(t,e,i),this):this.sizeFrom(t)},n.prototype.halt=function(){this._legacyStates.transform&&this._legacyStates.transform.halt(),this._legacyStates.opacity&&this._legacyStates.opacity.halt(),this._legacyStates.origin&&this._legacyStates.origin.halt(),this._legacyStates.align&&this._legacyStates.align.halt(),this._legacyStates.size&&this._legacyStates.size.halt(),this._transformGetter=null,this._opacityGetter=null,this._originGetter=null,this._alignGetter=null,this._sizeGetter=null},n.prototype.getTransform=function(){return this._transformGetter()},n.prototype.getFinalTransform=function(){return this._legacyStates.transform?this._legacyStates.transform.getFinal():this._output.transform},n.prototype.getOpacity=function(){return this._opacityGetter()},n.prototype.getOrigin=function(){return this._originGetter()},n.prototype.getAlign=function(){return this._alignGetter()},n.prototype.getSize=function(){return this._sizeGetter?this._sizeGetter():this._output.size},n.prototype.modify=function(t){return s.call(this),this._output.target=t,this._output},i.exports=n}),i("famous/core/Surface",["require","exports","module","./Entity","./EventHandler","./Transform"],function(t,e,i){function n(t){this.options={},this.properties={},this.content="",this.classList=[],this.size=null,this._classesDirty=!0,this._stylesDirty=!0,this._sizeDirty=!0,this._contentDirty=!0,this._dirtyClasses=[],this._matrix=null,this._opacity=1,this._origin=null,this._size=null,this.eventForwarder=function(t){this.emit(t.type,t)}.bind(this),this.eventHandler=new f,this.eventHandler.bindThis(this),this.id=l.register(this),t&&this.setOptions(t),this._currTarget=null}function s(t){for(var e in this.eventHandler.listeners)t.addEventListener(e,this.eventForwarder)}function o(t){for(var e in this.eventHandler.listeners)t.removeEventListener(e,this.eventForwarder)}function r(t){for(var e=0;e<this._dirtyClasses.length;e++)t.classList.remove(this._dirtyClasses[e]);this._dirtyClasses=[]}function a(t){for(var e in this.properties)t.style[e]=this.properties[e]}function u(t){for(var e in this.properties)t.style[e]=""}function h(t){t[12]=Math.round(t[12]*m)/m,t[13]=Math.round(t[13]*m)/m;for(var e="matrix3d(",i=0;15>i;i++)e+=t[i]<1e-6&&t[i]>-1e-6?"0,":t[i]+",";return e+=t[15]+")"}function c(t){return 100*t[0]+"% "+100*t[1]+"%"}function p(t,e){return t&&e?t[0]!==e[0]||t[1]!==e[1]:t!==e}var l=t("./Entity"),f=t("./EventHandler"),d=t("./Transform"),m=window.devicePixelRatio||1,g=void 0!==document.createElement("div").style.webkitTransform;n.prototype.elementType="div",n.prototype.elementClass="famous-surface",n.prototype.on=function(t,e){this._currTarget&&this._currTarget.addEventListener(t,this.eventForwarder),this.eventHandler.on(t,e)},n.prototype.removeListener=function(t,e){this.eventHandler.removeListener(t,e)},n.prototype.emit=function(t,e){e&&!e.origin&&(e.origin=this);var i=this.eventHandler.emit(t,e);return i&&e&&e.stopPropagation&&e.stopPropagation(),i},n.prototype.pipe=function(t){return this.eventHandler.pipe(t)},n.prototype.unpipe=function(t){return this.eventHandler.unpipe(t)},n.prototype.render=function(){return this.id},n.prototype.setProperties=function(t){for(var e in t)this.properties[e]=t[e];this._stylesDirty=!0},n.prototype.getProperties=function(){return this.properties},n.prototype.addClass=function(t){this.classList.indexOf(t)<0&&(this.classList.push(t),this._classesDirty=!0)},n.prototype.removeClass=function(t){var e=this.classList.indexOf(t);e>=0&&(this._dirtyClasses.push(this.classList.splice(e,1)[0]),this._classesDirty=!0)},n.prototype.setClasses=function(t){var e=0,i=[];for(e=0;e<this.classList.length;e++)t.indexOf(this.classList[e])<0&&i.push(this.classList[e]);for(e=0;e<i.length;e++)this.removeClass(i[e]);for(e=0;e<t.length;e++)this.addClass(t[e])},n.prototype.getClassList=function(){return this.classList},n.prototype.setContent=function(t){this.content!==t&&(this.content=t,this._contentDirty=!0)},n.prototype.getContent=function(){return this.content},n.prototype.setOptions=function(t){t.size&&this.setSize(t.size),t.classes&&this.setClasses(t.classes),t.properties&&this.setProperties(t.properties),t.content&&this.setContent(t.content)};var y;y=navigator.userAgent.toLowerCase().indexOf("firefox")>-1?function(t,e){t.style.zIndex=1e6*e[14]|0,t.style.transform=h(e)}:g?function(t,e){t.style.webkitTransform=h(e)}:function(t,e){t.style.transform=h(e)};var v=g?function(t,e){t.style.webkitTransformOrigin=c(e)}:function(t,e){t.style.transformOrigin=c(e)},_=g?function(t){t.style.webkitTransform="scale3d(0.0001,0.0001,1)",t.style.opacity=0}:function(t){t.style.transform="scale3d(0.0001,0.0001,1)",t.style.opacity=0};n.prototype.setup=function(t){var e=t.allocate(this.elementType);if(this.elementClass)if(this.elementClass instanceof Array)for(var i=0;i<this.elementClass.length;i++)e.classList.add(this.elementClass[i]);else e.classList.add(this.elementClass);e.style.display="",s.call(this,e),this._currTarget=e,this._stylesDirty=!0,this._classesDirty=!0,this._sizeDirty=!0,this._contentDirty=!0,this._matrix=null,this._opacity=void 0,this._origin=null,this._size=null},n.prototype.commit=function(t){this._currTarget||this.setup(t.allocator);var e=this._currTarget,i=t.transform,n=t.opacity,s=t.origin,o=t.size;if(this._classesDirty){r.call(this,e);for(var u=this.getClassList(),h=0;h<u.length;h++)e.classList.add(u[h]);this._classesDirty=!1}if(this._stylesDirty&&(a.call(this,e),this._stylesDirty=!1),this._contentDirty&&(this.deploy(e),this.eventHandler.emit("deploy"),this._contentDirty=!1),this.size){var c=o;o=[this.size[0],this.size[1]],void 0===o[0]&&c[0]&&(o[0]=c[0]),void 0===o[1]&&c[1]&&(o[1]=c[1])}if(o[0]===!0&&(o[0]=e.clientWidth),o[1]===!0&&(o[1]=e.clientHeight),p(this._size,o)&&(this._size||(this._size=[0,0]),this._size[0]=o[0],this._size[1]=o[1],this._sizeDirty=!0),!i&&this._matrix)return this._matrix=null,this._opacity=0,void _(e);if(this._opacity!==n&&(this._opacity=n,e.style.opacity=n>=1?"0.999999":n),p(this._origin,s)||d.notEquals(this._matrix,i)||this._sizeDirty){i||(i=d.identity),this._matrix=i;var l=i;s&&(this._origin||(this._origin=[0,0]),this._origin[0]=s[0],this._origin[1]=s[1],l=d.thenMove(i,[-this._size[0]*s[0],-this._size[1]*s[1],0]),v(e,s)),y(e,l)}this._sizeDirty&&(this._size&&(e.style.width=this.size&&this.size[0]===!0?"":this._size[0]+"px",e.style.height=this.size&&this.size[1]===!0?"":this._size[1]+"px"),this._sizeDirty=!1)},n.prototype.cleanup=function(t){var e=0,i=this._currTarget;this.eventHandler.emit("recall"),this.recall(i),i.style.display="none",i.style.width="",i.style.height="",this._size=null,u.call(this,i);var n=this.getClassList();for(r.call(this,i),e=0;e<n.length;e++)i.classList.remove(n[e]);if(this.elementClass)if(this.elementClass instanceof Array)for(e=0;e<this.elementClass.length;e++)i.classList.remove(this.elementClass[e]);else i.classList.remove(this.elementClass);o.call(this,i),this._currTarget=null,t.deallocate(i),_(i)},n.prototype.deploy=function(t){var e=this.getContent();if(e instanceof Node){for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}else t.innerHTML=e},n.prototype.recall=function(t){for(var e=document.createDocumentFragment();t.hasChildNodes();)e.appendChild(t.firstChild);this.setContent(e)},n.prototype.getSize=function(t){return t?this._size:this.size||this._size},n.prototype.setSize=function(t){this.size=t?[t[0],t[1]]:null,this._sizeDirty=!0},i.exports=n}),i("adarta/widgets/CornerBanner",["require","exports","module","famous/core/View","famous/core/Modifier","famous/core/Transform","famous/core/Surface"],function(t,e,i){function n(){o.apply(this,arguments),this.cornerSurface=new u({size:[this.options.size[0],this.options.size[1]],classes:this.options.classes,content:this.options.content,properties:{color:this.options.color,backgroundColor:this.options.backgroundColor,lineHeight:this.options.size[1]+"px",textAlign:"center"}}),this.cornerSurface.on("click",function(){this.select()}.bind(this)),this.cornerSurface.pipe(this._eventOutput),this.modifier=s(this.options.position,this.options.offset),this._add(this.modifier).add(this.cornerSurface),this._optionsManager.on("change",function(t){var e=t.id,i=t.value;"size"===e?this.cornerSurface.setSize(i):"content"===e&&this.cornerSurface.setContent(i)}.bind(this))}function s(t,e){var i,s=n.POSITION;switch(t){case s.RIGHT_TOP:i=new r({origin:[.5,-(.5+e)],align:[1,0]}),i.setTransform(a.rotateZ(Math.PI/4));break;case s.RIGHT_BOTTOM:i=new r({origin:[.5,1.5+e],align:[1,1]}),i.setTransform(a.rotateZ(-Math.PI/4));break;case s.LEFT_TOP:i=new r({origin:[.5,-(.5+e)],align:[0,0]}),i.setTransform(a.rotateZ(-Math.PI/4));break;case s.LEFT_BOTTOM:i=new r({origin:[.5,1.5+e],align:[0,1]}),i.setTransform(a.rotateZ(Math.PI/4));break;default:i=new r({origin:[.5,-(.5+e)],align:[1,0]}),i.setTransform(a.rotateZ(Math.PI/4))}return i}var o=t("famous/core/View"),r=t("famous/core/Modifier"),a=t("famous/core/Transform"),u=t("famous/core/Surface");n.prototype=Object.create(o.prototype),n.prototype.constructor=n,n.POSITION={RIGHT_TOP:0,RIGHT_BOTTOM:1,LEFT_TOP:2,LEFT_BOTTOM:3},n.DEFAULT_OPTIONS={content:"",offset:1,color:"black",classes:void 0,position:n.POSITION.RIGHT_TOP,size:[300,30],backgroundColor:"rgba(40,40,40,0.6)"},n.prototype.select=function(){this._eventOutput.emit("select",{position:this.options.position,content:this.options.content})},i.exports=n}),i("adarta/widgets/GitHubBanner",["require","exports","module","adarta/widgets/CornerBanner"],function(t,e,i){function n(t){s.apply(this,arguments),this.options=Object.create(this.constructor.DEFAULT_OPTIONS),this.options.size=t.size||this.options.size,this.options.account=t.account||this.options.account,this.options.repo=t.repo||this.options.repo,this.options.message=t.message||this.options.message,this.options.target=t.target||this.options.target,this.options.classes=t.classes||this.options.classes,this.options.backgroundColor=t.backgroundColor||this.options.backgroundColor,this.options.position=t.position||this.options.position,this.options.content='<a target="'+this.options.target+'" href="https://github.com',this.options.content+=this.options.account?"/"+this.options.account:"",this.options.content+=this.options.repo?"/"+this.options.repo:"",this.options.content+='" >'+this.options.message+"</a>",this._optionsManager.patch(this.options)}var s=t("adarta/widgets/CornerBanner");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.POSITION=s.POSITION,n.DEFAULT_OPTIONS={size:[300,30],account:"github",repo:void 0,message:"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Fork me on GitHub&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;",target:"_blank",classes:["github-banner"],backgroundColor:"rgba(40,40,40,0.6)",position:n.POSITION.RIGHT_TOP,content:""},i.exports=n}),i("famous/modifiers/StateModifier",["require","exports","module","famous/core/Modifier","famous/core/Transform","famous/transitions/Transitionable","famous/transitions/TransitionableTransform"],function(t,e,i){function n(t){this._transformState=new a(o.identity),this._opacityState=new r(1),this._originState=new r([0,0]),this._alignState=new r([0,0]),this._sizeState=new r([0,0]),this._modifier=new s({transform:this._transformState,opacity:this._opacityState,origin:null,align:null,size:null}),this._hasOrigin=!1,this._hasAlign=!1,this._hasSize=!1,t&&(t.transform&&this.setTransform(t.transform),void 0!==t.opacity&&this.setOpacity(t.opacity),t.origin&&this.setOrigin(t.origin),t.align&&this.setAlign(t.align),t.size&&this.setSize(t.size))}var s=t("famous/core/Modifier"),o=t("famous/core/Transform"),r=t("famous/transitions/Transitionable"),a=t("famous/transitions/TransitionableTransform");n.prototype.setTransform=function(t,e,i){return this._transformState.set(t,e,i),this},n.prototype.setOpacity=function(t,e,i){return this._opacityState.set(t,e,i),this},n.prototype.setOrigin=function(t,e,i){return null===t?(this._hasOrigin&&(this._modifier.originFrom(null),this._hasOrigin=!1),this):(this._hasOrigin||(this._hasOrigin=!0,this._modifier.originFrom(this._originState)),this._originState.set(t,e,i),this)},n.prototype.setAlign=function(t,e,i){return null===t?(this._hasAlign&&(this._modifier.alignFrom(null),this._hasAlign=!1),this):(this._hasAlign||(this._hasAlign=!0,this._modifier.alignFrom(this._alignState)),this._alignState.set(t,e,i),this)},n.prototype.setSize=function(t,e,i){return null===t?(this._hasSize&&(this._modifier.sizeFrom(null),this._hasSize=!1),this):(this._hasSize||(this._hasSize=!0,this._modifier.sizeFrom(this._sizeState)),this._sizeState.set(t,e,i),this)},n.prototype.halt=function(){this._transformState.halt(),this._opacityState.halt(),this._originState.halt(),this._alignState.halt(),this._sizeState.halt()},n.prototype.getTransform=function(){return this._transformState.get()},n.prototype.getFinalTransform=function(){return this._transformState.getFinal()},n.prototype.getOpacity=function(){return this._opacityState.get()},n.prototype.getOrigin=function(){return this._hasOrigin?this._originState.get():null},n.prototype.getAlign=function(){return this._hasAlign?this._alignState.get():null},n.prototype.getSize=function(){return this._hasSize?this._sizeState.get():null},n.prototype.modify=function(t){return this._modifier.modify(t)},i.exports=n}),i("famous/views/RenderController",["require","exports","module","famous/core/Modifier","famous/core/RenderNode","famous/core/Transform","famous/transitions/Transitionable","famous/core/View"],function(t,e,i){function n(){h.apply(this,arguments),this._showing=-1,this._outgoingRenderables=[],this._nextRenderable=null,this._renderables=[],this._nodes=[],this._modifiers=[],this._states=[],this.inTransformMap=n.DefaultMap.transform,this.inOpacityMap=n.DefaultMap.opacity,this.inOriginMap=n.DefaultMap.origin,this.outTransformMap=n.DefaultMap.transform,this.outOpacityMap=n.DefaultMap.opacity,this.outOriginMap=n.DefaultMap.origin,this._output=[]}function s(t,e){return t(e.get())}var o=t("famous/core/Modifier"),r=t("famous/core/RenderNode"),a=t("famous/core/Transform"),u=t("famous/transitions/Transitionable"),h=t("famous/core/View");n.prototype=Object.create(h.prototype),n.prototype.constructor=n,n.DEFAULT_OPTIONS={inTransition:!0,outTransition:!0,overlap:!0},n.DefaultMap={transform:function(){return a.identity},opacity:function(t){return t},origin:null},n.prototype.inTransformFrom=function(t){if(t instanceof Function)this.inTransformMap=t;else{if(!t||!t.get)throw new Error("inTransformFrom takes only function or getter object");this.inTransformMap=t.get.bind(t)}return this},n.prototype.inOpacityFrom=function(t){if(t instanceof Function)this.inOpacityMap=t;else{if(!t||!t.get)throw new Error("inOpacityFrom takes only function or getter object");this.inOpacityMap=t.get.bind(t)}return this},n.prototype.inOriginFrom=function(t){if(t instanceof Function)this.inOriginMap=t;else{if(!t||!t.get)throw new Error("inOriginFrom takes only function or getter object");this.inOriginMap=t.get.bind(t)}return this},n.prototype.outTransformFrom=function(t){if(t instanceof Function)this.outTransformMap=t;else{if(!t||!t.get)throw new Error("inTransformFrom takes only function or getter object");this.outTransformMap=t.get.bind(t)}return this},n.prototype.outOpacityFrom=function(t){if(t instanceof Function)this.outOpacityMap=t;else{if(!t||!t.get)throw new Error("inOpacityFrom takes only function or getter object");this.outOpacityMap=t.get.bind(t)}return this},n.prototype.outOriginFrom=function(t){if(t instanceof Function)this.outOriginMap=t;else{if(!t||!t.get)throw new Error("inOriginFrom takes only function or getter object");this.outOriginMap=t.get.bind(t)}return this},n.prototype.show=function(t,e,i){if(!t)return this.hide(i);if(e instanceof Function&&(i=e,e=null),this._showing>=0){if(!this.options.overlap)return void(this._nextRenderable?this._nextRenderable=t:(this._nextRenderable=t,this.hide(function(){this._nextRenderable===t&&this.show(this._nextRenderable,i),this._nextRenderable=null})));this.hide()}var n=null,a=this._renderables.indexOf(t);if(a>=0){this._showing=a,n=this._states[a],n.halt();var h=this._outgoingRenderables.indexOf(t);h>=0&&this._outgoingRenderables.splice(h,1)}else{n=new u(0);var c=new o({transform:this.inTransformMap?s.bind(this,this.inTransformMap,n):null,opacity:this.inOpacityMap?s.bind(this,this.inOpacityMap,n):null,origin:this.inOriginMap?s.bind(this,this.inOriginMap,n):null}),p=new r;p.add(c).add(t),this._showing=this._nodes.length,this._nodes.push(p),this._modifiers.push(c),this._states.push(n),this._renderables.push(t)}e||(e=this.options.inTransition),n.set(1,e,i)},n.prototype.hide=function(t,e){if(!(this._showing<0)){var i=this._showing;this._showing=-1,t instanceof Function&&(e=t,t=void 0);var n=this._nodes[i],o=this._modifiers[i],r=this._states[i],a=this._renderables[i];o.transformFrom(this.outTransformMap?s.bind(this,this.outTransformMap,r):null),o.opacityFrom(this.outOpacityMap?s.bind(this,this.outOpacityMap,r):null),o.originFrom(this.outOriginMap?s.bind(this,this.outOriginMap,r):null),this._outgoingRenderables.indexOf(a)<0&&this._outgoingRenderables.push(a),t||(t=this.options.outTransition),r.halt(),r.set(0,t,function(t,i,n,s){if(this._outgoingRenderables.indexOf(s)>=0){var o=this._nodes.indexOf(t);this._nodes.splice(o,1),this._modifiers.splice(o,1),this._states.splice(o,1),this._renderables.splice(o,1),this._outgoingRenderables.splice(this._outgoingRenderables.indexOf(s),1),this._showing>=o&&this._showing--}e&&e.call(this)}.bind(this,n,o,r,a))}},n.prototype.render=function(){var t=this._output;t.length>this._nodes.length&&t.splice(this._nodes.length);for(var e=0;e<this._nodes.length;e++)t[e]=this._nodes[e].render();return t},i.exports=n}),i("famous/physics/PhysicsEngine",["require","exports","module","famous/core/EventHandler"],function(t,e,i){function n(t){this.options=Object.create(n.DEFAULT_OPTIONS),t&&this.setOptions(t),this._particles=[],this._bodies=[],this._agents={},this._forces=[],this._constraints=[],this._buffer=0,this._prevTime=w(),this._isSleeping=!1,this._eventHandler=null,this._currAgentId=0,this._hasBodies=!1}function s(t){return t.applyForce?this._forces:t.applyConstraint?this._constraints:void 0}function o(t,e,i){return void 0===e&&(e=this.getParticlesAndBodies()),e instanceof Array||(e=[e]),this._agents[this._currAgentId]={agent:t,targets:e,source:i},s.call(this,t).push(this._currAgentId),this._currAgentId++}function r(t){return this._agents[t]}function a(t){var e=r.call(this,this._forces[t]);e.agent.applyForce(e.targets,e.source)}function u(){for(var t=this._forces.length-1;t>-1;t--)a.call(this,t)}function h(t,e){var i=this._agents[this._constraints[t]];return i.agent.applyConstraint(i.targets,i.source,e)}function c(t){for(var e=0;e<this.options.constraintSteps;){for(var i=this._constraints.length-1;i>-1;i--)h.call(this,i,t);e++}}function p(t,e){t.integrateVelocity(e)}function l(t,e){t.integrateAngularMomentum(e),t.updateAngularVelocity()}function f(t,e){t.integrateOrientation(e)}function d(t,e){t.integratePosition(e),t.emit("update",t)}function m(t){u.call(this,t),this.forEach(p,t),this.forEachBody(l,t),c.call(this,t),this.forEachBody(f,t),this.forEach(d,t)}function g(){var t=0,e=0;return this.forEach(function(i){e=i.getEnergy(),t+=e,e<i.sleepTolerance&&i.sleep()}),t}function y(){for(var t=0,e=this._forces.length-1;e>-1;e--)t+=this._forces[e].getEnergy()||0;return t}function v(){for(var t=0,e=this._constraints.length-1;e>-1;e--)t+=this._constraints[e].getEnergy()||0;return t}var _=t("famous/core/EventHandler"),b=17,O=1e3/120,T=17;n.DEFAULT_OPTIONS={constraintSteps:1,sleepTolerance:1e-7};var w=function(){return Date.now}();n.prototype.setOptions=function(t){for(var e in t)this.options[e]&&(this.options[e]=t[e])},n.prototype.addBody=function(t){return t._engine=this,t.isBody?(this._bodies.push(t),this._hasBodies=!0):this._particles.push(t),t},n.prototype.removeBody=function(t){var e=t.isBody?this._bodies:this._particles,i=e.indexOf(t);if(i>-1){for(var n=0;n<Object.keys(this._agents).length;n++)this.detachFrom(n,t);e.splice(i,1)}0===this.getBodies().length&&(this._hasBodies=!1)},n.prototype.attach=function(t,e,i){if(t instanceof Array){for(var n=[],s=0;s<t.length;s++)n[s]=o.call(this,t[s],e,i);return n}return o.call(this,t,e,i)},n.prototype.attachTo=function(t,e){r.call(this,t).targets.push(e)},n.prototype.detach=function(t){var e=this.getAgent(t),i=s.call(this,e),n=i.indexOf(t);i.splice(n,1),delete this._agents[t]},n.prototype.detachFrom=function(t,e){var i=r.call(this,t);if(i.source===e)this.detach(t);else{var n=i.targets,s=n.indexOf(e);s>-1&&n.splice(s,1)}},n.prototype.detachAll=function(){this._agents={},this._forces=[],this._constraints=[],this._currAgentId=0},n.prototype.getAgent=function(t){return r.call(this,t).agent},n.prototype.getParticles=function(){return this._particles},n.prototype.getBodies=function(){return this._bodies},n.prototype.getParticlesAndBodies=function(){return this.getParticles().concat(this.getBodies())},n.prototype.forEachParticle=function(t,e){for(var i=this.getParticles(),n=0,s=i.length;s>n;n++)t.call(this,i[n],e)},n.prototype.forEachBody=function(t,e){if(this._hasBodies)for(var i=this.getBodies(),n=0,s=i.length;s>n;n++)t.call(this,i[n],e)},n.prototype.forEach=function(t,e){this.forEachParticle(t,e),this.forEachBody(t,e)},n.prototype.getEnergy=function(){return g.call(this)+y.call(this)+v.call(this)},n.prototype.step=function(){var t=w(),e=t-this._prevTime;this._prevTime=t,O>e||(e>T&&(e=T),m.call(this,b))},n.prototype.isSleeping=function(){return this._isSleeping},n.prototype.sleep=function(){this.emit("end",this),this._isSleeping=!0},n.prototype.wake=function(){this._prevTime=w(),this.emit("start",this),this._isSleeping=!1},n.prototype.emit=function(t,e){null!==this._eventHandler&&this._eventHandler.emit(t,e)},n.prototype.on=function(t,e){null===this._eventHandler&&(this._eventHandler=new _),this._eventHandler.on(t,e)},i.exports=n}),i("famous/math/Vector",["require","exports","module"],function(t,e,i){function n(t,e,i){return 1===arguments.length?this.set(t):(this.x=t||0,this.y=e||0,this.z=i||0),this}function s(t,e,i){return this.x=t,this.y=e,this.z=i,this}function o(t){return s.call(this,t[0],t[1],t[2]||0)}function r(t){return s.call(this,t.x,t.y,t.z)}function a(t){return s.call(this,t,0,0)}var u=new n(0,0,0);n.prototype.add=function(t){return s.call(u,this.x+t.x,this.y+t.y,this.z+t.z)},n.prototype.sub=function(t){return s.call(u,this.x-t.x,this.y-t.y,this.z-t.z)},n.prototype.mult=function(t){return s.call(u,t*this.x,t*this.y,t*this.z)},n.prototype.div=function(t){return this.mult(1/t)},n.prototype.cross=function(t){var e=this.x,i=this.y,n=this.z,o=t.x,r=t.y,a=t.z;return s.call(u,n*r-i*a,e*a-n*o,i*o-e*r)},n.prototype.equals=function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},n.prototype.rotateX=function(t){var e=this.x,i=this.y,n=this.z,o=Math.cos(t),r=Math.sin(t);return s.call(u,e,i*o-n*r,i*r+n*o)},n.prototype.rotateY=function(t){var e=this.x,i=this.y,n=this.z,o=Math.cos(t),r=Math.sin(t);return s.call(u,n*r+e*o,i,n*o-e*r)},n.prototype.rotateZ=function(t){var e=this.x,i=this.y,n=this.z,o=Math.cos(t),r=Math.sin(t);return s.call(u,e*o-i*r,e*r+i*o,n)},n.prototype.dot=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},n.prototype.normSquared=function(){return this.dot(this)},n.prototype.norm=function(){return Math.sqrt(this.normSquared())},n.prototype.normalize=function(t){0===arguments.length&&(t=1);var e=this.norm();return e>1e-7?r.call(u,this.mult(t/e)):s.call(u,t,0,0)},n.prototype.clone=function(){return new n(this)},n.prototype.isZero=function(){return!(this.x||this.y||this.z)},n.prototype.set=function(t){return t instanceof Array?o.call(this,t):t instanceof n?r.call(this,t):"number"==typeof t?a.call(this,t):void 0},n.prototype.setXYZ=function(){return s.apply(this,arguments)},n.prototype.set1D=function(t){return a.call(this,t)},n.prototype.put=function(t){this===u?r.call(t,u):r.call(t,this)},n.prototype.clear=function(){return s.call(this,0,0,0)},n.prototype.cap=function h(h){if(1/0===h)return r.call(u,this);var t=this.norm();return t>h?r.call(u,this.mult(h/t)):r.call(u,this)},n.prototype.project=function(t){return t.mult(this.dot(t))},n.prototype.reflectAcross=function(t){return t.normalize().put(t),r(u,this.sub(this.project(t).mult(2)))},n.prototype.get=function(){return[this.x,this.y,this.z]},n.prototype.get1D=function(){return this.x},i.exports=n}),i("famous/physics/integrators/SymplecticEuler",["require","exports","module","famous/core/OptionsManager"],function(t,e,i){function n(t){this.options=Object.create(n.DEFAULT_OPTIONS),this._optionsManager=new s(this.options),t&&this.setOptions(t)}var s=t("famous/core/OptionsManager");n.DEFAULT_OPTIONS={velocityCap:void 0,angularVelocityCap:void 0},n.prototype.setOptions=function(t){this._optionsManager.patch(t)},n.prototype.getOptions=function(){return this._optionsManager.value()},n.prototype.integrateVelocity=function(t,e){var i=t.velocity,n=t.inverseMass,s=t.force;s.isZero()||(i.add(s.mult(e*n)).put(i),s.clear())},n.prototype.integratePosition=function(t,e){var i=t.position,n=t.velocity;this.options.velocityCap&&n.cap(this.options.velocityCap).put(n),i.add(n.mult(e)).put(i)},n.prototype.integrateAngularMomentum=function(t,e){var i=t.angularMomentum,n=t.torque;n.isZero()||(this.options.angularVelocityCap&&n.cap(this.options.angularVelocityCap).put(n),i.add(n.mult(e)).put(i),n.clear())},n.prototype.integrateOrientation=function(t,e){var i=t.orientation,n=t.angularVelocity;n.isZero()||i.add(i.multiply(n).scalarMultiply(.5*e)).put(i)},i.exports=n}),i("famous/physics/bodies/Particle",["require","exports","module","famous/math/Vector","famous/core/Transform","famous/core/EventHandler","../integrators/SymplecticEuler"],function(t,e,i){function n(t){t=t||{},this.position=new o,this.velocity=new o,this.force=new o;var e=n.DEFAULT_OPTIONS;this.setPosition(t.position||e.position),this.setVelocity(t.velocity||e.velocity),this.force.set(t.force||[0,0,0]),this.mass=void 0!==t.mass?t.mass:e.mass,this.axis=void 0!==t.axis?t.axis:e.axis,this.inverseMass=1/this.mass,this._isSleeping=!1,this._engine=null,this._eventOutput=null,this._positionGetter=null,this.transform=r.identity.slice(),this._spec={transform:this.transform,target:null}}function s(){this._eventOutput=new a,this._eventOutput.bindThis(this),a.setOutputHandler(this,this._eventOutput)}var o=t("famous/math/Vector"),r=t("famous/core/Transform"),a=t("famous/core/EventHandler"),u=t("../integrators/SymplecticEuler");n.DEFAULT_OPTIONS={position:[0,0,0],velocity:[0,0,0],mass:1,axis:void 0},n.SLEEP_TOLERANCE=1e-7,n.AXES={X:0,Y:1,Z:2},n.INTEGRATOR=new u;var h={start:"start",update:"update",end:"end"},c=function(){return Date.now}();n.prototype.sleep=function(){this._isSleeping||(this.emit(h.end,this),this._isSleeping=!0)},n.prototype.wake=function(){this._isSleeping&&(this.emit(h.start,this),this._isSleeping=!1,this._prevTime=c())},n.prototype.isBody=!1,n.prototype.setPosition=function(t){this.position.set(t)},n.prototype.setPosition1D=function(t){this.position.x=t},n.prototype.getPosition=function(){return this._positionGetter instanceof Function&&this.setPosition(this._positionGetter()),this._engine.step(),this.position.get()},n.prototype.getPosition1D=function(){return this._engine.step(),this.position.x},n.prototype.positionFrom=function(t){this._positionGetter=t},n.prototype.setVelocity=function(t){this.velocity.set(t),this.wake()},n.prototype.setVelocity1D=function(t){this.velocity.x=t,this.wake()},n.prototype.getVelocity=function(){return this.velocity.get()},n.prototype.getVelocity1D=function(){return this.velocity.x},n.prototype.setMass=function(t){this.mass=t,this.inverseMass=1/t},n.prototype.getMass=function(){return this.mass},n.prototype.reset=function(t,e){this.setPosition(t||[0,0,0]),this.setVelocity(e||[0,0,0])},n.prototype.applyForce=function(t){t.isZero()||(this.force.add(t).put(this.force),this.wake())},n.prototype.applyImpulse=function(t){if(!t.isZero()){var e=this.velocity;e.add(t.mult(this.inverseMass)).put(e)}},n.prototype.integrateVelocity=function(t){n.INTEGRATOR.integrateVelocity(this,t)},n.prototype.integratePosition=function(t){n.INTEGRATOR.integratePosition(this,t)
},n.prototype._integrate=function(t){this.integrateVelocity(t),this.integratePosition(t)},n.prototype.getEnergy=function(){return.5*this.mass*this.velocity.normSquared()},n.prototype.getTransform=function(){this._engine.step();var t=this.position,e=this.axis,i=this.transform;return void 0!==e&&(e&~n.AXES.X&&(t.x=0),e&~n.AXES.Y&&(t.y=0),e&~n.AXES.Z&&(t.z=0)),i[12]=t.x,i[13]=t.y,i[14]=t.z,i},n.prototype.modify=function(t){var e=this._spec;return e.transform=this.getTransform(),e.target=t,e},n.prototype.emit=function(t,e){this._eventOutput&&this._eventOutput.emit(t,e)},n.prototype.on=function(){return s.call(this),this.on.apply(this,arguments)},n.prototype.removeListener=function(){return s.call(this),this.removeListener.apply(this,arguments)},n.prototype.pipe=function(){return s.call(this),this.pipe.apply(this,arguments)},n.prototype.unpipe=function(){return s.call(this),this.unpipe.apply(this,arguments)},i.exports=n}),i("famous/physics/constraints/Constraint",["require","exports","module","famous/core/EventHandler"],function(t,e,i){function n(){this.options=this.options||{},this._energy=0,this._eventOutput=null}function s(){this._eventOutput=new o,this._eventOutput.bindThis(this),o.setOutputHandler(this,this._eventOutput)}var o=t("famous/core/EventHandler");n.prototype.setOptions=function(t){for(var e in t)this.options[e]=t[e]},n.prototype.applyConstraint=function(){},n.prototype.getEnergy=function(){return this._energy},n.prototype.setEnergy=function(t){this._energy=t},n.prototype.on=function(){return s.call(this),this.on.apply(this,arguments)},n.prototype.addListener=function(){return s.call(this),this.addListener.apply(this,arguments)},n.prototype.pipe=function(){return s.call(this),this.pipe.apply(this,arguments)},n.prototype.removeListener=function(){return this.removeListener.apply(this,arguments)},n.prototype.unpipe=function(){return this.unpipe.apply(this,arguments)},i.exports=n}),i("famous/physics/constraints/Snap",["require","exports","module","./Constraint","famous/math/Vector"],function(t,e,i){function n(t){this.options=Object.create(this.constructor.DEFAULT_OPTIONS),t&&this.setOptions(t),this.pDiff=new r,this.vDiff=new r,this.impulse1=new r,this.impulse2=new r,o.call(this)}function s(t,e,i){return Math.abs(t.dot(e)/i)}var o=t("./Constraint"),r=t("famous/math/Vector");n.prototype=Object.create(o.prototype),n.prototype.constructor=n,n.DEFAULT_OPTIONS={period:300,dampingRatio:.1,length:0,anchor:void 0};var a=Math.PI;n.prototype.setOptions=function(t){void 0!==t.anchor&&(t.anchor instanceof r&&(this.options.anchor=t.anchor),t.anchor.position instanceof r&&(this.options.anchor=t.anchor.position),t.anchor instanceof Array&&(this.options.anchor=new r(t.anchor))),void 0!==t.length&&(this.options.length=t.length),void 0!==t.dampingRatio&&(this.options.dampingRatio=t.dampingRatio),void 0!==t.period&&(this.options.period=t.period)},n.prototype.setAnchor=function(t){void 0!==this.options.anchor&&(this.options.anchor=new r),this.options.anchor.set(t)},n.prototype.getEnergy=function(t,e){var i=this.options,n=i.length,s=i.anchor||e.position,o=Math.pow(2*a/i.period,2),r=s.sub(t.position).norm()-n;return.5*o*r*r},n.prototype.applyConstraint=function(t,e,i){for(var n=this.options,o=this.pDiff,r=this.vDiff,u=this.impulse1,h=this.impulse2,c=n.length,p=n.anchor||e.position,l=n.period,f=n.dampingRatio,d=0;d<t.length;d++){var m=t[d],g=m.position,y=m.velocity,v=m.mass,_=m.inverseMass;o.set(g.sub(p));var b,O=o.norm()-c;if(e){var T=e.inverseMass,w=e.velocity;r.set(y.sub(w)),b=1/(_+T)}else r.set(y),b=v;var M,S;if(0===this.options.period)M=0,S=1;else{var z=4*b*a*a/(l*l),x=4*b*a*f/l;S=i*z/(x+i*z),M=1/(x+i*z)}var I=S/i*O;o.normalize(-I).sub(r).mult(i/(M+i/b)).put(u),m.applyImpulse(u),e&&(u.mult(-1).put(h),e.applyImpulse(h)),this.setEnergy(s(u,o,i))}},i.exports=n}),i("famous/transitions/SnapTransition",["require","exports","module","famous/physics/PhysicsEngine","famous/physics/bodies/Particle","famous/physics/constraints/Snap","famous/math/Vector"],function(t,e,i){function n(t){t=t||0,this.endState=new _(t),this.initState=new _,this._dimensions=1,this._restTolerance=1e-10,this._absRestTolerance=this._restTolerance,this._callback=void 0,this.PE=new g,this.particle=new y,this.spring=new v({anchor:this.endState}),this.PE.addBody(this.particle),this.PE.attach(this.spring,this.particle)}function s(){return this.particle.getEnergy()+this.spring.getEnergy(this.particle)}function o(){var t=this.endState.sub(this.initState).normSquared();this._absRestTolerance=0===t?this._restTolerance:this._restTolerance*t}function r(t){this.endState.set(t),o.call(this)}function a(){this.PE.wake()}function u(){this.PE.sleep()}function h(t){this.particle.position.set(t)}function c(t){this.particle.velocity.set(t)}function p(){return 0===this._dimensions?this.particle.getPosition1D():this.particle.getPosition()}function l(){return 0===this._dimensions?this.particle.getVelocity1D():this.particle.getVelocity()}function f(t){this._callback=t}function d(t){var e=n.DEFAULT_OPTIONS;void 0===t.period&&(t.period=e.period),void 0===t.dampingRatio&&(t.dampingRatio=e.dampingRatio),void 0===t.velocity&&(t.velocity=e.velocity),this.spring.setOptions({period:t.period,dampingRatio:t.dampingRatio}),c.call(this,t.velocity)}function m(){if(this.PE.isSleeping()){if(this._callback){var t=this._callback;this._callback=void 0,t()}}else s.call(this)<this._absRestTolerance&&(h.call(this,this.endState),c.call(this,[0,0,0]),u.call(this))}var g=t("famous/physics/PhysicsEngine"),y=t("famous/physics/bodies/Particle"),v=t("famous/physics/constraints/Snap"),_=t("famous/math/Vector");n.SUPPORTS_MULTIPLE=3,n.DEFAULT_OPTIONS={period:100,dampingRatio:.2,velocity:0},n.prototype.reset=function(t,e){this._dimensions=t instanceof Array?t.length:0,this.initState.set(t),h.call(this,t),r.call(this,t),e&&c.call(this,e),f.call(this,void 0)},n.prototype.getVelocity=function(){return l.call(this)},n.prototype.setVelocity=function(t){this.call(this,c(t))},n.prototype.isActive=function(){return!this.PE.isSleeping()},n.prototype.halt=function(){this.set(this.get())},n.prototype.get=function(){return m.call(this),p.call(this)},n.prototype.set=function(t,e,i){return e?(this._dimensions=t instanceof Array?t.length:0,a.call(this),d.call(this,e),r.call(this,t),void f.call(this,i)):(this.reset(t),void(i&&i()))},i.exports=n}),i("famous/utilities/Timer",["require","exports","module","famous/core/Engine"],function(t,e,i){function n(t){return c.on(p,t),t}function s(t,e){var i=l(),s=function(){var n=l();n-i>=e&&(t.apply(this,arguments),c.removeListener(p,s))};return n(s)}function o(t,e){var i=l(),s=function(){var n=l();n-i>=e&&(t.apply(this,arguments),i=l())};return n(s)}function r(t,e){if(void 0===e)return void 0;var i=function(){e--,0>=e&&(t.apply(this,arguments),u(i))};return n(i)}function a(t,e){e=e||1;var i=e,s=function(){e--,0>=e&&(t.apply(this,arguments),e=i)};return n(s)}function u(t){c.removeListener(p,t)}function h(t,e){var i,n,o,r,a;return function(){n=this,a=arguments,o=l();var h=function(){var u=l-o;e>u?i=s(h,e-u):(i=null,r=t.apply(n,a))};return u(i),i=s(h,e),r}}var c=t("famous/core/Engine"),p="prerender",l=window.performance?function(){return window.performance.now()}:function(){return Date.now()};i.exports={setTimeout:s,setInterval:o,debounce:h,after:r,every:a,clear:u}}),i("famous/inputs/GenericSync",["require","exports","module","famous/core/EventHandler"],function(t,e,i){function n(t,e){this._eventInput=new o,this._eventOutput=new o,o.setInputHandler(this,this._eventInput),o.setOutputHandler(this,this._eventOutput),this._syncs={},t&&this.addSync(t),e&&this.setOptions(e)}function s(t,e){r[t]&&(this._syncs[t]=new r[t](e),this.pipeSync(t))}var o=t("famous/core/EventHandler");n.DIRECTION_X=0,n.DIRECTION_Y=1,n.DIRECTION_Z=2;var r={};n.register=function(t){for(var e in t){if(r[e]){if(r[e]===t[e])return;throw new Error("this key is registered to a different sync class")}r[e]=t[e]}},n.prototype.setOptions=function(t){for(var e in this._syncs)this._syncs[e].setOptions(t)},n.prototype.pipeSync=function(t){var e=this._syncs[t];this._eventInput.pipe(e),e.pipe(this._eventOutput)},n.prototype.unpipeSync=function(t){var e=this._syncs[t];this._eventInput.unpipe(e),e.unpipe(this._eventOutput)},n.prototype.addSync=function(t){if(t instanceof Array)for(var e=0;e<t.length;e++)s.call(this,t[e]);else if(t instanceof Object)for(var i in t)s.call(this,i,t[i])},i.exports=n}),i("famous/inputs/MouseSync",["require","exports","module","famous/core/EventHandler"],function(t,e,i){function n(t){this.options=Object.create(n.DEFAULT_OPTIONS),t&&this.setOptions(t),this._eventInput=new u,this._eventOutput=new u,u.setInputHandler(this,this._eventInput),u.setOutputHandler(this,this._eventOutput),this._eventInput.on("mousedown",s.bind(this)),this._eventInput.on("mousemove",o.bind(this)),this._eventInput.on("mouseup",r.bind(this)),this.options.propogate?this._eventInput.on("mouseleave",a.bind(this)):this._eventInput.on("mouseleave",r.bind(this)),this._payload={delta:null,position:null,velocity:null,clientX:0,clientY:0,offsetX:0,offsetY:0},this._position=null,this._prevCoord=void 0,this._prevTime=void 0,this._down=!1,this._moved=!1}function s(t){var e,i;t.preventDefault();var n=t.clientX,s=t.clientY;this._prevCoord=[n,s],this._prevTime=c(),this._down=!0,this._move=!1,void 0!==this.options.direction?(this._position=0,e=0,i=0):(this._position=[0,0],e=[0,0],i=[0,0]);var o=this._payload;o.delta=e,o.position=this._position,o.velocity=i,o.clientX=n,o.clientY=s,o.offsetX=t.offsetX,o.offsetY=t.offsetY,this._eventOutput.emit("start",o)}function o(t){if(this._prevCoord){var e=this._prevCoord,i=this._prevTime,s=t.clientX,o=t.clientY,r=c(),a=s-e[0],u=o-e[1];this.options.rails&&(Math.abs(a)>Math.abs(u)?u=0:a=0);var p,l,f=Math.max(r-i,h),d=a/f,m=u/f,g=this.options.scale;this.options.direction===n.DIRECTION_X?(l=g*a,p=g*d,this._position+=l):this.options.direction===n.DIRECTION_Y?(l=g*u,p=g*m,this._position+=l):(l=[g*a,g*u],p=[g*d,g*m],this._position[0]+=l[0],this._position[1]+=l[1]);var y=this._payload;y.delta=l,y.position=this._position,y.velocity=p,y.clientX=s,y.clientY=o,y.offsetX=t.offsetX,y.offsetY=t.offsetY,this._eventOutput.emit("update",y),this._prevCoord=[s,o],this._prevTime=r,this._move=!0}}function r(){this._down&&(this._eventOutput.emit("end",this._payload),this._prevCoord=void 0,this._prevTime=void 0,this._down=!1,this._move=!1)}function a(t){if(this._down&&this._move){var e=o.bind(this),i=function(t){r.call(this,t),document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",i)}.bind(this,t);document.addEventListener("mousemove",e),document.addEventListener("mouseup",i)}}var u=t("famous/core/EventHandler");n.DEFAULT_OPTIONS={direction:void 0,rails:!1,scale:1,propogate:!0},n.DIRECTION_X=0,n.DIRECTION_Y=1;var h=8,c=Date.now;n.prototype.getOptions=function(){return this.options},n.prototype.setOptions=function(t){void 0!==t.direction&&(this.options.direction=t.direction),void 0!==t.rails&&(this.options.rails=t.rails),void 0!==t.scale&&(this.options.scale=t.scale),void 0!==t.propogate&&(this.options.propogate=t.propogate)},i.exports=n}),i("famous/inputs/TouchTracker",["require","exports","module","famous/core/EventHandler"],function(t,e,i){function n(t,e,i){return{x:t.clientX,y:t.clientY,identifier:t.identifier,origin:e.origin,timestamp:c(),count:e.touches.length,history:i}}function s(t){for(var e=0;e<t.changedTouches.length;e++){var i=t.changedTouches[e],s=n(i,t,null);this.eventOutput.emit("trackstart",s),this.selective||this.touchHistory[i.identifier]||this.track(s)}}function o(t){for(var e=0;e<t.changedTouches.length;e++){var i=t.changedTouches[e],s=this.touchHistory[i.identifier];if(s){var o=n(i,t,s);this.touchHistory[i.identifier].push(o),this.eventOutput.emit("trackmove",o)}}}function r(t){for(var e=0;e<t.changedTouches.length;e++){var i=t.changedTouches[e],s=this.touchHistory[i.identifier];if(s){var o=n(i,t,s);this.eventOutput.emit("trackend",o),delete this.touchHistory[i.identifier]}}}function a(){for(var t in this.touchHistory){var e=this.touchHistory[t];this.eventOutput.emit("trackend",{touch:e[e.length-1].touch,timestamp:Date.now(),count:0,history:e}),delete this.touchHistory[t]}}function u(t){this.selective=t,this.touchHistory={},this.eventInput=new h,this.eventOutput=new h,h.setInputHandler(this,this.eventInput),h.setOutputHandler(this,this.eventOutput),this.eventInput.on("touchstart",s.bind(this)),this.eventInput.on("touchmove",o.bind(this)),this.eventInput.on("touchend",r.bind(this)),this.eventInput.on("touchcancel",r.bind(this)),this.eventInput.on("unpipe",a.bind(this))}var h=t("famous/core/EventHandler"),c=Date.now;u.prototype.track=function(t){this.touchHistory[t.identifier]=[t]},i.exports=u}),i("famous/inputs/TouchSync",["require","exports","module","./TouchTracker","famous/core/EventHandler"],function(t,e,i){function n(t){this.options=Object.create(n.DEFAULT_OPTIONS),t&&this.setOptions(t),this._eventOutput=new u,this._touchTracker=new a,u.setOutputHandler(this,this._eventOutput),u.setInputHandler(this,this._touchTracker),this._touchTracker.on("trackstart",s.bind(this)),this._touchTracker.on("trackmove",o.bind(this)),this._touchTracker.on("trackend",r.bind(this)),this._payload={delta:null,position:null,velocity:null,clientX:void 0,clientY:void 0,count:0,touch:void 0},this._position=null}function s(t){var e,i;void 0!==this.options.direction?(this._position=0,e=0,i=0):(this._position=[0,0],e=[0,0],i=[0,0]);var n=this._payload;n.delta=i,n.position=this._position,n.velocity=e,n.clientX=t.x,n.clientY=t.y,n.count=t.count,n.touch=t.identifier,this._eventOutput.emit("start",n)}function o(t){var e=t.history,i=e[e.length-1],s=e[e.length-2],o=s.timestamp,r=i.timestamp,a=i.x-s.x,u=i.y-s.y;this.options.rails&&(Math.abs(a)>Math.abs(u)?u=0:a=0);var c,p,l=Math.max(r-o,h),f=a/l,d=u/l,m=this.options.scale;this.options.direction===n.DIRECTION_X?(p=m*a,c=m*f,this._position+=p):this.options.direction===n.DIRECTION_Y?(p=m*u,c=m*d,this._position+=p):(p=[m*a,m*u],c=[m*f,m*d],this._position[0]+=p[0],this._position[1]+=p[1]);var g=this._payload;g.delta=p,g.velocity=c,g.position=this._position,g.clientX=t.x,g.clientY=t.y,g.count=t.count,g.touch=t.identifier,this._eventOutput.emit("update",g)}function r(t){this._payload.count=t.count,this._eventOutput.emit("end",this._payload)}var a=t("./TouchTracker"),u=t("famous/core/EventHandler");n.DEFAULT_OPTIONS={direction:void 0,rails:!1,scale:1},n.DIRECTION_X=0,n.DIRECTION_Y=1;var h=8;n.prototype.setOptions=function(t){void 0!==t.direction&&(this.options.direction=t.direction),void 0!==t.rails&&(this.options.rails=t.rails),void 0!==t.scale&&(this.options.scale=t.scale)},n.prototype.getOptions=function(){return this.options},i.exports=n}),i("views/BubbleMenu",["require","exports","module","famous/core/View","famous/views/RenderController","famous/core/Surface","famous/core/Transform","famous/core/Modifier","famous/transitions/Transitionable","famous/transitions/SnapTransition","famous/utilities/Timer","famous/inputs/GenericSync","famous/inputs/MouseSync","famous/inputs/TouchSync"],function(t,e,i){function n(t){var e=Math.round(t.menuItemSize/2),i=Math.PI*this.angle/180,n=t.menuArcRadius,s=t.layoutDirection*n*Math.cos(i),o=t.layout*n*Math.sin(i);return this.itemOn?(this.mod.halt(),this.mod.setTransform(_.translate(0-e,0-e,0),{duration:100})):(this.mod.halt(),this.mod.setTransform(_.translate(s-e,o-e,0),{method:"spring",period:500})),this.itemOn}function s(){return this.itemOn?this.renderer.hide():this.renderer.show(this),this.itemOn}function o(t){this.radius=Math.round(t/2),this.setOptions({size:[t,t],properties:{borderRadius:this.radius+"px",lineHeight:t+"px"}}),this.mod.halt(),this.mod.setTransform(_.translate(0-this.radius,0-this.radius,0),{duration:100})}function r(){var t=this.pos.get();return _.translate(t[0],t[1],2)}function a(){var t=this.pos.get();return _.translate(t[0],t[1],1)}function u(t){this._eventOutput.emit("itemClick",{data:t})}function h(){for(var t=Math.round(this.options.menuItemSize/2),e=0,i=this.options.menuList.length;i>e;e++){var r=this.options.menuList[e],h=new v({size:[this.options.menuItemSize,this.options.menuItemSize],content:r,properties:{backgroundColor:"rgba(0,0,0,0.25)",borderRadius:t+"px",lineHeight:this.options.menuItemSize+"px",textAlign:"center",cursor:"pointer"}});h.pos=new O([0-t,0-t]),h.mod=new b({align:this.options.menuAlign,transform:a.bind(h)}),h.angle=this.menuItemDegrees*e,h.toggle=n.bind(h),h.resize=o.bind(h),h.renderer=new y({overlap:!1}),h.toggleme=s.bind(h,this.options),this.menuButtons.push(h),this.menuSizeModifier.add(h.mod).add(h.renderer),h.on("click",u.bind(this))}}function c(t){var e;return e=t.menuDegrees&&t.menuList.length?360===t.menuDegrees?t.menuDegrees/t.menuList.length:t.menuDegrees/(t.menuList.length-1):0}function p(){if(this.menuButtons)for(var t=this.menuButtons.length-1;t>=0;t--)delete this.menuButtons[t];this.menuButtons=[],this.menuItemDegrees=c(this.options)}function l(){var t=Math.round(this.options.menuSize/2);this.mainMenu=new v({size:[this.options.menuSize,this.options.menuSize],content:this.options.menuLabel,properties:{backgroundColor:"rgba(255, 0, 0, 0.75)",borderRadius:t+"px",lineHeight:this.options.menuSize+"px",textAlign:"center",fontWeight:"bold",cursor:"pointer"}}),this.mainMenu.itemsOff=!1,this.mainMenu.sync=new M(["mouse","touch"]);var e=new b({origin:this.options.menuOrigin,size:this.options.widgetSize});this.mainMenu.pos=new O([0-t,0-t]),this.mainMenu.mod=new b({align:this.options.menuAlign,transform:r.bind(this.mainMenu)}),this.menuSizeModifier=this.add(e),this.menuModifier=this.menuSizeModifier.add(this.mainMenu.mod),this.menuModifier.add(this.mainMenu)}function f(){this.mainMenu.pipe(this.mainMenu.sync),this.mainMenu.radius=Math.round(this.options.menuSize/2),this.mainMenu.on("click",function(){if(this.mainMenu.realClick){this.mainMenu.itemsOff=!this.mainMenu.itemsOff;for(var t=0;t<this.menuButtons.length;t++){var e=this.menuButtons[t];e.itemOn=!this.mainMenu.itemsOff;var i=e.toggleme;w.setTimeout(i.bind(e),50*t);var n=e.toggle;w.setTimeout(n.bind(e,this.options),100*t)}}}.bind(this)),this.mainMenu.sync.on("update",function(t){var e=this.mainMenu.pos.get(),i=e[0]+t.delta[0],n=e[1]+t.delta[1];this.mainMenu.pos.set([i,n])}.bind(this)),this.mainMenu.sync.on("end",function(t){return this.mainMenu.realClick=Math.abs(t.delta[0])+Math.abs(t.delta[1])<this.mainMenu.radius,this.mainMenu.pos.set([0-this.mainMenu.radius,0-this.mainMenu.radius],{method:"spring",period:300,velocity:t.velocity})}.bind(this)),this._optionsManager.on("change",function(t){var e=t.id,i=t.value;"menuSize"===e&&(this.mainMenu.radius=Math.round(i/2),this.mainMenu.setOptions({size:[i,i],properties:{borderRadius:this.mainMenu.radius+"px",lineHeight:i+"px"}}),this.mainMenu.pos=new O([0-this.mainMenu.radius,0-this.mainMenu.radius]));var n,s=0,o=0;if("menuItemSize"===e)for(s=0;s<this.menuButtons.length;s++)this.menuButtons[s].resize(i);if("menuAlign"===e)for(this.mainMenu.mod.alignFrom(i),s=0;s<this.menuButtons.length;s++)this.menuButtons[s].mod.alignFrom(i);if("menuDegrees"===e)for(this.menuItemDegrees=c(this.options),o=0;o<this.menuButtons.length;o++)this.menuButtons[o].angle=this.menuItemDegrees*o;if("menuLabel"===e&&this.mainMenu.setOptions({content:i}),"menuList"===e){for(this.mainMenu.itemsOff=!0,o=0;o<this.menuButtons.length;o++)n=this.menuButtons[o],n.itemOn=this.mainMenu.itemsOff,n.toggleme.call(n);this.mainMenu.itemsOff=!1,p.call(this),h.call(this)}if("showBackground"===e&&(i?this.background.renderer.show(this.background):this.background.renderer.hide()),this.mainMenu.itemsOff)for(o=0;o<this.menuButtons.length;o++){n=this.menuButtons[o],n.itemOn=!this.mainMenu.itemsOff;var r=n.toggle;w.setTimeout(r.bind(n,this.options),100*o)}}.bind(this))}function d(){var t=new y,e=new v({size:this.options.widgetSize,properties:{backgroundColor:"rgba(0, 0, 50, 0.25)"}}),i=new b({transform:_.translate(0,0,-1)});this.background=e,this.background.renderer=t,this.menuSizeModifier.add(i).add(this.background.renderer),this.options.showBackground&&this.background.renderer.show(this.background)}function m(){g.apply(this,arguments),l.call(this),d.call(this),p.call(this),h.call(this),f.call(this)}var g=t("famous/core/View"),y=t("famous/views/RenderController"),v=t("famous/core/Surface"),_=t("famous/core/Transform"),b=t("famous/core/Modifier"),O=t("famous/transitions/Transitionable"),T=t("famous/transitions/SnapTransition"),w=t("famous/utilities/Timer"),M=t("famous/inputs/GenericSync"),S=t("famous/inputs/MouseSync"),z=t("famous/inputs/TouchSync");M.register({mouse:S,touch:z}),O.registerMethod("spring",T),m.prototype=Object.create(g.prototype),m.prototype.constructor=m,m.prototype.setBackgroundColor=function(t){this.background.setProperties({backgroundColor:t})},m.DIRECTION={RIGHTTOLEFT:1,LEFTTORIGHT:-1},m.LAYOUT={TOP:-1,BOTTOM:1},m.DEFAULT_OPTIONS={widgetSize:[void 0,void 0],menuOrigin:[.5,.5],menuAlign:[.5,.5],menuArcRadius:100,menuSize:100,menuItemSize:80,menuDegrees:180,menuLabel:"Main Menu",menuList:["1","2","3","4"],layoutDirection:m.DIRECTION.LEFTTORIGHT,layout:m.LAYOUT.TOP,showBackground:!1},i.exports=m}),i("famous/surfaces/ImageSurface",["require","exports","module","famous/core/Surface"],function(t,e,i){function n(){this._imageUrl=void 0,s.apply(this,arguments)}var s=t("famous/core/Surface");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.elementType="img",n.prototype.elementClass="famous-surface",n.prototype.setContent=function(t){this._imageUrl=t,this._contentDirty=!0},n.prototype.deploy=function(t){t.src=this._imageUrl||""},n.prototype.recall=function(t){t.src=""},i.exports=n}),i("views/Data",["require","exports","module"],function(t,e,i){function n(){return{imageURLs:["http://famo.us/university/home/images/fuicons/hello.svg","http://famo.us/university/home/images/fuicons/displaying.svg","http://famo.us/university/home/images/fuicons/positioning.svg","http://famo.us/university/home/images/fuicons/eventing.svg","http://famo.us/university/home/images/fuicons/animating.svg","http://famo.us/university/home/images/fuicons/hello.svg","http://famo.us/university/home/images/fuicons/coming.svg"]}}i.exports=n}),i("famous/views/Lightbox",["require","exports","module","famous/core/Transform","famous/core/Modifier","famous/core/RenderNode","famous/utilities/Utility","famous/core/OptionsManager","famous/transitions/Transitionable","famous/transitions/TransitionableTransform"],function(t,e,i){function n(t){this.options=Object.create(n.DEFAULT_OPTIONS),this._optionsManager=new u(this.options),t&&this.setOptions(t),this._showing=!1,this.nodes=[],this.transforms=[],this.states=[]}var s=t("famous/core/Transform"),o=t("famous/core/Modifier"),r=t("famous/core/RenderNode"),a=t("famous/utilities/Utility"),u=t("famous/core/OptionsManager"),h=t("famous/transitions/Transitionable"),c=t("famous/transitions/TransitionableTransform");n.DEFAULT_OPTIONS={inTransform:s.scale(.001,.001,.001),inOpacity:0,inOrigin:[.5,.5],outTransform:s.scale(.001,.001,.001),outOpacity:0,outOrigin:[.5,.5],showTransform:s.identity,showOpacity:1,showOrigin:[.5,.5],inTransition:!0,outTransition:!0,overlap:!1},n.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},n.prototype.show=function(t,e,i){if(!t)return this.hide(i);if(e instanceof Function&&(i=e,e=void 0),this._showing){if(!this.options.overlap)return this.hide(this.show.bind(this,t,e,i));this.hide()}this._showing=!0;var n={transform:new c(this.options.inTransform),origin:new h(this.options.inOrigin),opacity:new h(this.options.inOpacity)},s=new o({transform:n.transform,opacity:n.opacity,origin:n.origin}),u=new r;u.add(s).add(t),this.nodes.push(u),this.states.push(n),this.transforms.push(s);var p=i?a.after(3,i):void 0;e||(e=this.options.inTransition),n.transform.set(this.options.showTransform,e,p),n.opacity.set(this.options.showOpacity,e,p),n.origin.set(this.options.showOrigin,e,p)},n.prototype.hide=function(t,e){if(this._showing){this._showing=!1,t instanceof Function&&(e=t,t=void 0);var i=this.nodes[this.nodes.length-1],n=this.transforms[this.transforms.length-1],s=this.states[this.states.length-1],o=a.after(3,function(){this.nodes.splice(this.nodes.indexOf(i),1),this.states.splice(this.states.indexOf(s),1),this.transforms.splice(this.transforms.indexOf(n),1),e&&e.call(this)}.bind(this));t||(t=this.options.outTransition),s.transform.set(this.options.outTransform,t,o),s.opacity.set(this.options.outOpacity,t,o),s.origin.set(this.options.outOrigin,t,o)}},n.prototype.render=function(){for(var t=[],e=0;e<this.nodes.length;e++)t.push(this.nodes[e].render());return t},i.exports=n}),i("views/SlideShow",["require","exports","module","famous/core/View","famous/surfaces/ImageSurface","famous/core/Modifier","famous/core/Transform","./Data","famous/views/Lightbox"],function(t,e,i){function n(){s.apply(this,arguments);var t=new a;this.surfaces=[];for(var e=0;e<t.imageURLs.length;e++){var i=new o({size:this.options.size,content:t.imageURLs[e],properties:{cursor:"pointer",borderRadius:"20px"}});this.surfaces.push(i),i.pipe(this._eventOutput)}this.renderer=new u({inTransform:r.rotate(0,1,.2),inOpacity:.7,inOrigin:[0,0],showOrigin:this.options.align,outTransform:r.rotate(0,-Math.PI/2,1),outOpacity:0,outOrigin:[0,0],inTransition:{duration:800,curve:"linear"},outTransition:{duration:600,curve:"linear"},overlap:!1}),this.add(this.renderer),this.renderer.show(this.surfaces[0]),this.nextIndex=0}var s=t("famous/core/View"),o=t("famous/surfaces/ImageSurface"),r=(t("famous/core/Modifier"),t("famous/core/Transform")),a=t("./Data"),u=t("famous/views/Lightbox");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.setIndex=function(t){this.renderer.show(this.surfaces[t])},n.prototype.getLength=function(){return this.surfaces.length},i.exports=n}),i("views/AppView",["require","exports","module","famous/core/View","famous/core/Transform","famous/modifiers/StateModifier","famous/core/Modifier","famous/core/Surface","./BubbleMenu","./SlideShow"],function(t,e,i){function n(){function t(){this.setOptions({properties:{backgroundColor:"rgba(255, 120, 0, 0.6)"}})}function e(){this.setOptions({properties:{backgroundColor:"rgba(255, 120, 0, 0.4)"}})}s.apply(this,arguments);var i=new c({size:[300,300],origin:[0,0],align:[.5,.9]});i.state=new r({transform:o.translate(0,0,2)}),this.add(i.state).add(i);var n=new h({widgetSize:[200,200],menuOrigin:[.5,.1],menuAlign:[.5,0],menuSize:90,menuArcRadius:120,menuItemSize:50,menuDegrees:180,menuLabel:"Main Menu",menuList:["Item1","Item2","Item3","Item4","Item5","Item6","Item7"],layoutDirection:h.DIRECTION.LEFTTORIGHT,layout:h.LAYOUT.BOTTOM,showBackground:!1});n.state=new r({transform:o.translate(0,0,90)}),this.add(n.state).add(n),n.on("itemClick",function(t){if(t.data.currentTarget)for(var e=t.data.currentTarget,n=0;n<this.options.menuList.length;n++)if(this.options.menuList[n]===e.textContent){i.setIndex(n);break}}),n.setBackgroundColor("rgba(60, 0, 0, 0.25");var p={borderRadius:"5px",lineHeight:"40px",textAlign:"center",fontSize:"20px",fontWeight:"bold",cursor:"pointer",backgroundColor:"rgba(255, 120, 0, 0.6)"},l=new u({size:[95,40],content:"Top",properties:p});l.on("mouseover",e.bind(l)),l.on("mouseout",t.bind(l)),l.on("click",function(){n.setOptions({layout:h.LAYOUT.TOP})}),this.add(new a({transform:o.translate(10,20,7)})).add(l);var f=new u({size:[95,40],content:"Bottom",properties:p});f.on("mouseover",e.bind(f)),f.on("mouseout",t.bind(f)),f.on("click",function(){n.setOptions({layout:h.LAYOUT.BOTTOM})}),this.add(new a({transform:o.translate(110,20,7)})).add(f);var d=new u({size:[95,40],content:"Left-Right",properties:p});d.on("mouseover",e.bind(d)),d.on("mouseout",t.bind(d)),d.on("click",function(){n.setOptions({layoutDirection:h.DIRECTION.LEFTTORIGHT})}),this.add(new a({transform:o.translate(10,80,7)})).add(d);var m=new u({size:[95,40],content:"Right-Left",properties:p});m.on("mouseover",e.bind(m)),m.on("mouseout",t.bind(m)),m.on("click",function(){n.setOptions({layoutDirection:h.DIRECTION.RIGHTTOLEFT})}),this.add(new a({transform:o.translate(110,80,7)})).add(m);var g=[60,40],y=new u({size:g,content:"0,0",properties:p});y.on("mouseover",e.bind(y)),y.on("mouseout",t.bind(y)),y.on("click",function(){n.setOptions({menuAlign:[0,0]})}),this.add(new a({transform:o.translate(10,140,7)})).add(y);var v=new u({size:g,content:"0.5,0",properties:p});v.on("mouseover",e.bind(v)),v.on("mouseout",t.bind(v)),v.on("click",function(){n.setOptions({menuAlign:[.5,0]})}),this.add(new a({transform:o.translate(80,140,7)})).add(v);var _=new u({size:g,content:"1,0",properties:p});_.on("mouseover",e.bind(_)),_.on("mouseout",t.bind(_)),_.on("click",function(){n.setOptions({menuAlign:[1,0]})}),this.add(new a({transform:o.translate(150,140,7)})).add(_);var b=new u({size:g,content:"0,0.5",properties:p});b.on("mouseover",e.bind(b)),b.on("mouseout",t.bind(b)),b.on("click",function(){n.setOptions({menuAlign:[0,.5]})}),this.add(new a({transform:o.translate(10,190,7)})).add(b);var O=new u({size:g,content:"0.5,0.5",properties:p});O.on("mouseover",e.bind(O)),O.on("mouseout",t.bind(O)),O.on("click",function(){n.setOptions({menuAlign:[.5,.5]})}),this.add(new a({transform:o.translate(80,190,7)})).add(O);var T=new u({size:g,content:"1,0.5",properties:p});T.on("mouseover",e.bind(T)),T.on("mouseout",t.bind(T)),T.on("click",function(){n.setOptions({menuAlign:[1,.5]})}),this.add(new a({transform:o.translate(150,190,7)})).add(T);var w=new u({size:g,content:"0,1",properties:p});w.on("mouseover",e.bind(w)),w.on("mouseout",t.bind(w)),w.on("click",function(){n.setOptions({menuAlign:[0,1]})}),this.add(new a({transform:o.translate(10,240,7)})).add(w);var M=new u({size:g,content:"0.5,1",properties:p});M.on("mouseover",e.bind(M)),M.on("mouseout",t.bind(M)),M.on("click",function(){n.setOptions({menuAlign:[.5,1]})}),this.add(new a({transform:o.translate(80,240,7)})).add(M);var S=new u({size:g,content:"1,1",properties:p});S.on("mouseover",e.bind(S)),S.on("mouseout",t.bind(S)),S.on("click",function(){n.setOptions({menuAlign:[1,1]})}),this.add(new a({transform:o.translate(150,240,7)})).add(S);var z=new u({size:g,content:"90&deg;",properties:p});z.on("mouseover",e.bind(z)),z.on("mouseout",t.bind(z)),z.on("click",function(){n.setOptions({menuDegrees:90})}),this.add(new a({transform:o.translate(10,300,7)})).add(z);var x=new u({size:g,content:"180&deg;",properties:p});x.on("mouseover",e.bind(x)),x.on("mouseout",t.bind(x)),x.on("click",function(){n.setOptions({menuDegrees:180})}),this.add(new a({transform:o.translate(80,300,7)})).add(x);var I=new u({size:g,content:"360&deg;",properties:p});I.on("mouseover",e.bind(I)),I.on("mouseout",t.bind(I)),I.on("click",function(){n.setOptions({menuDegrees:360})}),this.add(new a({transform:o.translate(150,300,7)})).add(I);var E=new u({size:g,content:"More",properties:p});E.on("mouseover",e.bind(E)),E.on("mouseout",t.bind(E)),E.on("click",function(){E.radiusArcLength=n.options.menuArcRadius,E.radiusArcLength=E.radiusArcLength+10<=300?E.radiusArcLength+10:50,n.setOptions({menuArcRadius:E.radiusArcLength})}),this.add(new a({transform:o.translate(10,360,7)})).add(E);var C=new u({size:g,content:"Less",properties:p});C.on("mouseover",e.bind(C)),C.on("mouseout",t.bind(C)),C.on("click",function(){C.radiusArcLength=n.options.menuArcRadius,C.radiusArcLength=C.radiusArcLength-10>=50?C.radiusArcLength-10:200,n.setOptions({menuArcRadius:C.radiusArcLength})}),this.add(new a({transform:o.translate(80,360,7)})).add(C);var k=new u({size:[200,60],content:"Background",properties:p});k.on("mouseover",e.bind(k)),k.on("mouseout",t.bind(k)),k.on("click",function(){k.show=!n.options.showBackground,n.setOptions({showBackground:k.show})}),this.add(new a({transform:o.translate(10,420,7)})).add(k)}var s=t("famous/core/View"),o=t("famous/core/Transform"),r=t("famous/modifiers/StateModifier"),a=t("famous/core/Modifier"),u=t("famous/core/Surface"),h=t("./BubbleMenu"),c=t("./SlideShow");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.DEFAULT_OPTIONS={size:[void 0,void 0]},i.exports=n
}),i("main",["require","exports","module","famous/core/Engine","adarta/widgets/GitHubBanner","./views/AppView"],function(t){var e=t("famous/core/Engine"),i=t("adarta/widgets/GitHubBanner"),n=t("./views/AppView"),s=e.createContext(),o=new i({size:[400,40],offset:1,message:"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Fork me on GitHub&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;",account:"Famous",repo:"famous",position:i.POSITION.RIGHT_TOP,classes:["github-banner"]}),r=new n;s.add(o),s.add(r)}),e(["main"])}();